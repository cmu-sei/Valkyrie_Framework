{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"@grafana/ui\"","webpack:///external \"d3\"","webpack:///external \"jquery\"","webpack:///../node_modules/randomcolor/randomColor.js","webpack:///external \"@grafana/data\"","webpack:///../node_modules/median-quickselect/lib/median-quickselect.min.js","webpack:///./ScatterPanel.css?db01","webpack:///../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./ScatterPanel.css","webpack:///../node_modules/css-loader/dist/runtime/api.js","webpack:///../node_modules/webpack/buildin/module.js","webpack:///./editors/ExtentsEditor.tsx","webpack:///./editors/MarginPairEditor.tsx","webpack:///./editors/TitleEditor.tsx","webpack:///./editors/LabelEditor.tsx","webpack:///./editors/LegendEditor.tsx","webpack:///./editors/BorderEditor.tsx","webpack:///./editors/GridEditor.tsx","webpack:///./types/Border.ts","webpack:///./types/XAxis.ts","webpack:///./types/MarginPair.ts","webpack:///./types/Label.ts","webpack:///./types/Title.ts","webpack:///./types/Grid.ts","webpack:///./types/Legend.ts","webpack:///./types/Extents.ts","webpack:///../node_modules/is-any-array/src/index.js","webpack:///../node_modules/ml-regression-base/src/index.js","webpack:///../node_modules/ml-regression-base/src/checkArrayLength.js","webpack:///../node_modules/ml-regression-base/src/maybeToPrecision.js","webpack:///../node_modules/ml-regression-simple-linear/src/index.js","webpack:///../node_modules/ml-regression-exponential/src/index.js","webpack:///../node_modules/ml-array-max/lib-es6/index.js","webpack:///../node_modules/ml-array-min/lib-es6/index.js","webpack:///../node_modules/ml-array-rescale/lib-es6/index.js","webpack:///../node_modules/ml-matrix/src/inspect.js","webpack:///../node_modules/ml-matrix/src/util.js","webpack:///../node_modules/ml-matrix/src/matrix.js","webpack:///../node_modules/ml-matrix/src/stat.js","webpack:///../node_modules/ml-matrix/src/mathOperations.js","webpack:///../node_modules/ml-matrix/src/views/base.js","webpack:///../node_modules/ml-matrix/src/views/transpose.js","webpack:///../node_modules/ml-matrix/src/wrap/WrapperMatrix2D.js","webpack:///../node_modules/ml-matrix/src/dc/lu.js","webpack:///../node_modules/ml-matrix/src/dc/util.js","webpack:///../node_modules/ml-matrix/src/dc/qr.js","webpack:///../node_modules/ml-matrix/src/dc/svd.js","webpack:///../node_modules/ml-matrix/src/decompositions.js","webpack:///../node_modules/ml-regression-polynomial/src/index.js","webpack:///../node_modules/ml-regression-power/src/index.js","webpack:///../node_modules/ml-array-median/lib-es6/index.js","webpack:///../node_modules/ml-regression-theil-sen/src/index.js","webpack:///./types/ColData.ts","webpack:///./types/FieldSet.ts","webpack:///./ScatterPanel.tsx","webpack:///./editors/XAxisEditor.tsx","webpack:///./editors/FieldSetEditor.tsx","webpack:///./types/ReferenceLine.ts","webpack:///./editors/ReferenceLinesEditor.tsx","webpack:///./module.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","randomColor","seed","colorDictionary","defineColor","colorRanges","options","undefined","parseInt","string","total","length","Number","MAX_SAFE_INTEGER","charCodeAt","stringToInteger","TypeError","H","S","count","totalColors","colors","push","color","hsv","format","HSVtoHSL","hsl","hslColor","alpha","Math","random","HSVtoRGB","join","rgbColor","rgb","componentToHex","hex","toString","HSVtoHex","setFormat","hue","randomWithin","hueRange","colorHue","isNaN","match","getColorInfo","HexToHSB","number","getRealHueRange","step","j","min","max","colorInput","getHueRange","pickHue","luminosity","saturationRange","getSaturationRange","sMin","sMax","pickSaturation","bMin","lowerBounds","s1","v1","s2","v2","getMinimumBrightness","bMax","pickBrightness","colorName","range","floor","rnd","brightnessRange","h","v","h_i","f","q","g","b","replace","red","substr","green","blue","cMax","delta","saturation","k","round","factory","__WEBPACK_EXTERNAL_MODULE__5__","a","e","_ref","window","median","api","content","default","exported","locals","memo","isOldIE","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","list","idCountMap","identifiers","item","id","base","concat","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","_index","splice","___CSS_LOADER_API_IMPORT___","useSourceMap","this","map","cssMapping","sourceMapping","base64","data","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","webpackPolyfill","deprecate","paths","children","className","type","title","onChange","valueAsNumber","lower","upper","textSize","enableNamedColors","text","rotated","currentTarget","checked","logScale","fontSize","fontColor","context","flatMap","frame","field","label","config","displayName","valid","col","isLoading","isClearable","disabled","size","inverted","show","isAnyArray","endsWith","x","_predict","y","y2","Array","xSum","ySum","chi2","rmsd","xSquared","ySquared","xY","sqrt","r2","checkArraySize","RangeError","maybeToPrecision","digits","toPrecision","super","slope","intercept","coefficients","slr","numerator","regress","precision","xFactor","absIntercept","abs","json","A","B","er","yl","log","linear","exp","input","arguments","_options$fromIndex","fromIndex","_options$toIndex","toIndex","isInteger","maxValue","minValue","rescale","output","currentMin","currentMax","_options$min","autoMinMax","_options$max","factor","indent","repeat","indentData","inspectMatrixWithOptions","matrix","maxRows","maxColumns","maxNumSize","constructor","rows","columns","maxI","maxJ","line","formatNumber","inspectData","num","numStr","String","padEnd","precise","exponential","toExponential","eIndex","indexOf","slice","checkRowIndex","outer","checkColumnIndex","checkRowVector","vector","to1DArray","checkColumnVector","checkRowIndices","rowIndices","some","isArray","from","checkColumnIndices","columnIndices","checkRange","startRow","endRow","startColumn","endColumn","checkNumber","newArray","array","checkNonEmpty","isEmpty","newRows","newColumns","newData","newMatrix","row","column","set","fill","interval","zeros","matrix1","matrix2","checkMatrix","isMatrix","klass","callback","copy","to2DArray","isSquare","previousColumn","isEchelonForm","isReducedEchelonForm","clone","iMax","swapRows","tmp","echelonForm","maxRow","pivot","setSubMatrix","mulS","rowVector","getRow","row1","row2","temp","columnVector","getColumn","column1","column2","NaN","idx","diag","sum","vector2","vector1","dot","other","Bcolj","Float64Array","a11","b11","a12","b12","a21","b21","a22","b22","m1","m2","m3","m4","m5","c00","c01","c10","c11","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m6","m7","m8","m9","m12","m13","m14","m15","m16","m17","m18","c02","c12","c20","c21","c22","r1","c1","c2","embed","mat","cols","resultat","blockMult","mmul","halfRows","halfCols","subMatrix","add","sub","isFinite","setRow","setColumn","middle","ceil","first","last","AxI","kroneckerProduct","eye","IxB","compareFunction","compareNumbers","sort","indices","checkIndices","rowIndex","columnIndex","trace","by","sumByRow","sumByColumn","sumAll","productByRow","productByColumn","productAll","unbiased","mean","variance","sum1","sum2","varianceByRow","varianceByColumn","varianceAll","center","centerByRow","centerByColumn","centerAll","scale","pow","getScaleByRow","scaleByRow","getScaleByColumn","scaleByColumn","divider","getScaleAll","scaleAll","for","rand","randomInt","randInt","diagonal","identity","negate","neg","tensorProduct","nRows","nColumns","arrayData","newRow","AbstractMatrix","Matrix","addS","addM","subS","subM","subtract","subtractS","subtractM","mul","mulM","multiply","multiplyS","multiplyM","div","divS","divM","divide","divideS","divideM","mod","modS","modM","modulus","modulusS","modulusM","and","andS","andM","or","orS","orM","xor","xorS","xorM","leftShift","leftShiftS","leftShiftM","signPropagatingRightShift","signPropagatingRightShiftS","signPropagatingRightShiftM","rightShift","rightShiftS","rightShiftM","zeroFillRightShift","zeroFillRightShiftS","zeroFillRightShiftM","not","acos","acosh","asin","asinh","atan","atanh","cbrt","clz32","cos","cosh","expm1","fround","log1p","log10","log2","sign","sin","sinh","tan","tanh","trunc","arg0","powS","powM","LUcolj","kmax","lu","pivotVector","pivotSign","LU","isSingular","X","subMatrixRow","determinant","hypotenuse","qr","rdiag","nrm","QR","Rdiag","isFullRank","computeLeftSingularVectors","computeRightSingularVectors","autoTranspose","wantu","wantv","swapped","transpose","aux","nu","ni","U","V","work","si","nct","nrt","mrc","pp","iter","eps","EPSILON","kase","MIN_VALUE","ks","cs","sn","sp","spm1","epm1","sk","ek","shift","Y","threshold","scols","Ls","rightSingularVectors","VL","vrows","urows","VLU","solve","vcols","ucols","tol","ii","leftHandSide","rightHandSide","useSVD","degree","powers","pr","F","FT","_toFormula","isLaTeX","sup","closeSup","times","fn","str","charAt","xl","newInputs","latex","regression","len","slopes","medianSlope","cuts","theilSen","values","sizeCol","dotSize","lineSize","lineType","polynomialOrder","hidden","colorCol","applySetFieldSetHidden","fieldSet","panelId","panelGroup","markers","addClass","removeClass","lines","drawLegend","width","height","xMargins","yMargins","colNames","rightMarginOffset","ReferenceLines","vertical","legend","fieldSets","maxLength","dx","transform","alignmentBaseline","textAnchor","onClick","thisLegendTextElement","legendGroup","parent","legendTextElements","hiddenLegendTextElements","ctrlKey","toggleClass","hasClass","onLegendClick","generateContent","colData","colValues","xValues","xAxis","xExtent","xAxisExtents","yValues","yExtents","yExtent","yAxisExtents","labels","isXAxisLabelValid","MarginPair","xAxisTitle","yAxisTitle","xTitle","drawXTitle","yTitle","drawYTitle","border","stroke","strokeWidth","clippath","xScale","nice","domain","ticks","tickSize","yScale","yAxis","ref","node","attr","selectAll","grid","ReferenceLinesContent","ReferenceLine","xValue","lineColor","fontWeight","x1","x2","y1","yValue","drawReferenceLines","clipPath","path","xyData","xy","SLR","x0","y0","predict","computeX","ex","ey","ER","steps","xys","px","py","PR","pnx","pny","PN","tx","ty","TS","drawLines","dotColor","cx","cy","drawDots","drawLabels","stringOptions","val","colorOverride","addButton","variant","FieldSet","series","request","fields","ColData","toArray","overflow","XAxis","Title","autoConfigure","setPanelOptions","builder","addCustomEditor","category","editor","defaultValue","Extents","Label","Legend","Grid","Border"],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","// randomColor by David Merfield under the CC0 license\n// https://github.com/davidmerfield/randomColor/\n\n;(function(root, factory) {\n\n  // Support CommonJS\n  if (typeof exports === 'object') {\n    var randomColor = factory();\n\n    // Support NodeJS & Component, which allow module.exports to be a function\n    if (typeof module === 'object' && module && module.exports) {\n      exports = module.exports = randomColor;\n    }\n\n    // Support CommonJS 1.1.1 spec\n    exports.randomColor = randomColor;\n\n  // Support AMD\n  } else if (typeof define === 'function' && define.amd) {\n    define([], factory);\n\n  // Support vanilla script loading\n  } else {\n    root.randomColor = factory();\n  }\n\n}(this, function() {\n\n  // Seed to get repeatable colors\n  var seed = null;\n\n  // Shared color dictionary\n  var colorDictionary = {};\n\n  // Populate the color dictionary\n  loadColorBounds();\n\n  // check if a range is taken\n  var colorRanges = [];\n\n  var randomColor = function (options) {\n\n    options = options || {};\n\n    // Check if there is a seed and ensure it's an\n    // integer. Otherwise, reset the seed value.\n    if (options.seed !== undefined && options.seed !== null && options.seed === parseInt(options.seed, 10)) {\n      seed = options.seed;\n\n    // A string was passed as a seed\n    } else if (typeof options.seed === 'string') {\n      seed = stringToInteger(options.seed);\n\n    // Something was passed as a seed but it wasn't an integer or string\n    } else if (options.seed !== undefined && options.seed !== null) {\n      throw new TypeError('The seed value must be an integer or string');\n\n    // No seed, reset the value outside.\n    } else {\n      seed = null;\n    }\n\n    var H,S,B;\n\n    // Check if we need to generate multiple colors\n    if (options.count !== null && options.count !== undefined) {\n\n      var totalColors = options.count,\n          colors = [];\n      // Value false at index i means the range i is not taken yet.\n      for (var i = 0; i < options.count; i++) {\n        colorRanges.push(false)\n        }\n      options.count = null;\n\n      while (totalColors > colors.length) {\n\n        var color = randomColor(options);\n\n        if (seed !== null) {\n          options.seed = seed;\n        }\n\n        colors.push(color);\n      }\n\n      options.count = totalColors;\n\n      return colors;\n    }\n\n    // First we pick a hue (H)\n    H = pickHue(options);\n\n    // Then use H to determine saturation (S)\n    S = pickSaturation(H, options);\n\n    // Then use S and H to determine brightness (B).\n    B = pickBrightness(H, S, options);\n\n    // Then we return the HSB color in the desired format\n    return setFormat([H,S,B], options);\n  };\n\n  function pickHue(options) {\n    if (colorRanges.length > 0) {\n      var hueRange = getRealHueRange(options.hue)\n\n      var hue = randomWithin(hueRange)\n\n      //Each of colorRanges.length ranges has a length equal approximatelly one step\n      var step = (hueRange[1] - hueRange[0]) / colorRanges.length\n\n      var j = parseInt((hue - hueRange[0]) / step)\n\n      //Check if the range j is taken\n      if (colorRanges[j] === true) {\n        j = (j + 2) % colorRanges.length\n      }\n      else {\n        colorRanges[j] = true\n           }\n\n      var min = (hueRange[0] + j * step) % 359,\n          max = (hueRange[0] + (j + 1) * step) % 359;\n\n      hueRange = [min, max]\n\n      hue = randomWithin(hueRange)\n\n      if (hue < 0) {hue = 360 + hue;}\n      return hue\n    }\n    else {\n      var hueRange = getHueRange(options.hue)\n\n      hue = randomWithin(hueRange);\n      // Instead of storing red as two seperate ranges,\n      // we group them, using negative numbers\n      if (hue < 0) {\n        hue = 360 + hue;\n      }\n\n      return hue;\n    }\n  }\n\n  function pickSaturation (hue, options) {\n\n    if (options.hue === 'monochrome') {\n      return 0;\n    }\n\n    if (options.luminosity === 'random') {\n      return randomWithin([0,100]);\n    }\n\n    var saturationRange = getSaturationRange(hue);\n\n    var sMin = saturationRange[0],\n        sMax = saturationRange[1];\n\n    switch (options.luminosity) {\n\n      case 'bright':\n        sMin = 55;\n        break;\n\n      case 'dark':\n        sMin = sMax - 10;\n        break;\n\n      case 'light':\n        sMax = 55;\n        break;\n   }\n\n    return randomWithin([sMin, sMax]);\n\n  }\n\n  function pickBrightness (H, S, options) {\n\n    var bMin = getMinimumBrightness(H, S),\n        bMax = 100;\n\n    switch (options.luminosity) {\n\n      case 'dark':\n        bMax = bMin + 20;\n        break;\n\n      case 'light':\n        bMin = (bMax + bMin)/2;\n        break;\n\n      case 'random':\n        bMin = 0;\n        bMax = 100;\n        break;\n    }\n\n    return randomWithin([bMin, bMax]);\n  }\n\n  function setFormat (hsv, options) {\n\n    switch (options.format) {\n\n      case 'hsvArray':\n        return hsv;\n\n      case 'hslArray':\n        return HSVtoHSL(hsv);\n\n      case 'hsl':\n        var hsl = HSVtoHSL(hsv);\n        return 'hsl('+hsl[0]+', '+hsl[1]+'%, '+hsl[2]+'%)';\n\n      case 'hsla':\n        var hslColor = HSVtoHSL(hsv);\n        var alpha = options.alpha || Math.random();\n        return 'hsla('+hslColor[0]+', '+hslColor[1]+'%, '+hslColor[2]+'%, ' + alpha + ')';\n\n      case 'rgbArray':\n        return HSVtoRGB(hsv);\n\n      case 'rgb':\n        var rgb = HSVtoRGB(hsv);\n        return 'rgb(' + rgb.join(', ') + ')';\n\n      case 'rgba':\n        var rgbColor = HSVtoRGB(hsv);\n        var alpha = options.alpha || Math.random();\n        return 'rgba(' + rgbColor.join(', ') + ', ' + alpha + ')';\n\n      default:\n        return HSVtoHex(hsv);\n    }\n\n  }\n\n  function getMinimumBrightness(H, S) {\n\n    var lowerBounds = getColorInfo(H).lowerBounds;\n\n    for (var i = 0; i < lowerBounds.length - 1; i++) {\n\n      var s1 = lowerBounds[i][0],\n          v1 = lowerBounds[i][1];\n\n      var s2 = lowerBounds[i+1][0],\n          v2 = lowerBounds[i+1][1];\n\n      if (S >= s1 && S <= s2) {\n\n         var m = (v2 - v1)/(s2 - s1),\n             b = v1 - m*s1;\n\n         return m*S + b;\n      }\n\n    }\n\n    return 0;\n  }\n\n  function getHueRange (colorInput) {\n\n    if (typeof parseInt(colorInput) === 'number') {\n\n      var number = parseInt(colorInput);\n\n      if (number < 360 && number > 0) {\n        return [number, number];\n      }\n\n    }\n\n    if (typeof colorInput === 'string') {\n\n      if (colorDictionary[colorInput]) {\n        var color = colorDictionary[colorInput];\n        if (color.hueRange) {return color.hueRange;}\n      } else if (colorInput.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {\n        var hue = HexToHSB(colorInput)[0];\n        return [ hue, hue ];\n      }\n    }\n\n    return [0,360];\n\n  }\n\n  function getSaturationRange (hue) {\n    return getColorInfo(hue).saturationRange;\n  }\n\n  function getColorInfo (hue) {\n\n    // Maps red colors to make picking hue easier\n    if (hue >= 334 && hue <= 360) {\n      hue-= 360;\n    }\n\n    for (var colorName in colorDictionary) {\n       var color = colorDictionary[colorName];\n       if (color.hueRange &&\n           hue >= color.hueRange[0] &&\n           hue <= color.hueRange[1]) {\n          return colorDictionary[colorName];\n       }\n    } return 'Color not found';\n  }\n\n  function randomWithin (range) {\n    if (seed === null) {\n      //generate random evenly destinct number from : https://martin.ankerl.com/2009/12/09/how-to-create-random-colors-programmatically/\n      var golden_ratio = 0.618033988749895\n      var r=Math.random()\n      r += golden_ratio\n      r %= 1\n      return Math.floor(range[0] + r*(range[1] + 1 - range[0]));\n    } else {\n      //Seeded random algorithm from http://indiegamr.com/generate-repeatable-random-numbers-in-js/\n      var max = range[1] || 1;\n      var min = range[0] || 0;\n      seed = (seed * 9301 + 49297) % 233280;\n      var rnd = seed / 233280.0;\n      return Math.floor(min + rnd * (max - min));\n}\n  }\n\n  function HSVtoHex (hsv){\n\n    var rgb = HSVtoRGB(hsv);\n\n    function componentToHex(c) {\n        var hex = c.toString(16);\n        return hex.length == 1 ? '0' + hex : hex;\n    }\n\n    var hex = '#' + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);\n\n    return hex;\n\n  }\n\n  function defineColor (name, hueRange, lowerBounds) {\n\n    var sMin = lowerBounds[0][0],\n        sMax = lowerBounds[lowerBounds.length - 1][0],\n\n        bMin = lowerBounds[lowerBounds.length - 1][1],\n        bMax = lowerBounds[0][1];\n\n    colorDictionary[name] = {\n      hueRange: hueRange,\n      lowerBounds: lowerBounds,\n      saturationRange: [sMin, sMax],\n      brightnessRange: [bMin, bMax]\n    };\n\n  }\n\n  function loadColorBounds () {\n\n    defineColor(\n      'monochrome',\n      null,\n      [[0,0],[100,0]]\n    );\n\n    defineColor(\n      'red',\n      [-26,18],\n      [[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]\n    );\n\n    defineColor(\n      'orange',\n      [18,46],\n      [[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]\n    );\n\n    defineColor(\n      'yellow',\n      [46,62],\n      [[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]\n    );\n\n    defineColor(\n      'green',\n      [62,178],\n      [[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]\n    );\n\n    defineColor(\n      'blue',\n      [178, 257],\n      [[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]\n    );\n\n    defineColor(\n      'purple',\n      [257, 282],\n      [[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]\n    );\n\n    defineColor(\n      'pink',\n      [282, 334],\n      [[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]\n    );\n\n  }\n\n  function HSVtoRGB (hsv) {\n\n    // this doesn't work for the values of 0 and 360\n    // here's the hacky fix\n    var h = hsv[0];\n    if (h === 0) {h = 1;}\n    if (h === 360) {h = 359;}\n\n    // Rebase the h,s,v values\n    h = h/360;\n    var s = hsv[1]/100,\n        v = hsv[2]/100;\n\n    var h_i = Math.floor(h*6),\n      f = h * 6 - h_i,\n      p = v * (1 - s),\n      q = v * (1 - f*s),\n      t = v * (1 - (1 - f)*s),\n      r = 256,\n      g = 256,\n      b = 256;\n\n    switch(h_i) {\n      case 0: r = v; g = t; b = p;  break;\n      case 1: r = q; g = v; b = p;  break;\n      case 2: r = p; g = v; b = t;  break;\n      case 3: r = p; g = q; b = v;  break;\n      case 4: r = t; g = p; b = v;  break;\n      case 5: r = v; g = p; b = q;  break;\n    }\n\n    var result = [Math.floor(r*255), Math.floor(g*255), Math.floor(b*255)];\n    return result;\n  }\n\n  function HexToHSB (hex) {\n    hex = hex.replace(/^#/, '');\n    hex = hex.length === 3 ? hex.replace(/(.)/g, '$1$1') : hex;\n\n    var red = parseInt(hex.substr(0, 2), 16) / 255,\n          green = parseInt(hex.substr(2, 2), 16) / 255,\n          blue = parseInt(hex.substr(4, 2), 16) / 255;\n\n    var cMax = Math.max(red, green, blue),\n          delta = cMax - Math.min(red, green, blue),\n          saturation = cMax ? (delta / cMax) : 0;\n\n    switch (cMax) {\n      case red: return [ 60 * (((green - blue) / delta) % 6) || 0, saturation, cMax ];\n      case green: return [ 60 * (((blue - red) / delta) + 2) || 0, saturation, cMax ];\n      case blue: return [ 60 * (((red - green) / delta) + 4) || 0, saturation, cMax ];\n    }\n  }\n\n  function HSVtoHSL (hsv) {\n    var h = hsv[0],\n      s = hsv[1]/100,\n      v = hsv[2]/100,\n      k = (2-s)*v;\n\n    return [\n      h,\n      Math.round(s*v / (k<1 ? k : 2-k) * 10000) / 100,\n      k/2 * 100\n    ];\n  }\n\n  function stringToInteger (string) {\n    var total = 0\n    for (var i = 0; i !== string.length; i++) {\n      if (total >= Number.MAX_SAFE_INTEGER) break;\n      total += string.charCodeAt(i)\n    }\n    return total\n  }\n\n  // get The range of given hue when options.count!=0\n  function getRealHueRange(colorHue)\n  { if (!isNaN(colorHue)) {\n    var number = parseInt(colorHue);\n\n    if (number < 360 && number > 0) {\n      return getColorInfo(colorHue).hueRange\n    }\n  }\n    else if (typeof colorHue === 'string') {\n\n      if (colorDictionary[colorHue]) {\n        var color = colorDictionary[colorHue];\n\n        if (color.hueRange) {\n          return color.hueRange\n       }\n    } else if (colorHue.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {\n        var hue = HexToHSB(colorHue)[0]\n        return getColorInfo(hue).hueRange\n    }\n  }\n\n    return [0,360]\n}\n  return randomColor;\n}));\n","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","(function(){function a(d){for(var e=0,f=d.length-1,g=void 0,h=void 0,i=void 0,j=c(e,f);!0;){if(f<=e)return d[j];if(f==e+1)return d[e]>d[f]&&b(d,e,f),d[j];for(g=c(e,f),d[g]>d[f]&&b(d,g,f),d[e]>d[f]&&b(d,e,f),d[g]>d[e]&&b(d,g,e),b(d,g,e+1),h=e+1,i=f;!0;){do h++;while(d[e]>d[h]);do i--;while(d[i]>d[e]);if(i<h)break;b(d,h,i)}b(d,e,i),i<=j&&(e=h),i>=j&&(f=i-1)}}var b=function b(d,e,f){var _ref;return _ref=[d[f],d[e]],d[e]=_ref[0],d[f]=_ref[1],_ref},c=function c(d,e){return~~((d+e)/2)};'undefined'!=typeof module&&module.exports?module.exports=a:window.median=a})();\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--8-1!../node_modules/postcss-loader/src/index.js??ref--8-2!../node_modules/sass-loader/dist/cjs.js!./ScatterPanel.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \".FieldSetEditor{margin-bottom:25px}.ScatterFlex{display:flex;flex-wrap:nowrap;padding:1px}.ScatterSize{width:115px}.ScatterSize input{width:55px}.ScatterDotSize{width:220px}.ScatterDotColor{padding-top:7px}.ScatterSelect{display:flex;min-width:160px}.ScatterExtents{display:flex}.ScatterExtentLimit{width:90px;padding-right:20px}.ScatterMargins{display:flex}.ScatterMarginLimit{width:90px;padding-right:20px}.ScatterLabel{padding-top:6px;width:90px;color:#9fa7b3;font-size:12px;text-align:center}.ScatterCheckbox{padding-top:6px;padding-right:10px;width:75px;color:#9fa7b3;font-size:12px;text-align:right}.ScatterFlex label{margin-top:5px}.ScatterSetHidden{fill:rgba(119,119,119,.25)}.ScatterLine{fill:none}.ScatterLineHidden{opacity:.25;stroke-width:1px}.TitleEditor{display:flex}.TitleText{width:160px}.TitleColor{padding-top:7px}.LabelEditor{display:flex}.LabelColor{padding-top:7px}.ReferenceLineValue{width:65px}.ReferenceLineLabel{width:100px}.ReferenceLineDeleteButton{margin-top:4px;margin-left:20px}.ScatterLegend input{width:50px}.ScatterLegendText{border:1px solid #fff}.ScatterLegendTextHidden{fill:rgba(119,119,119,.25)}.ScatterTooltip{position:absolute;text-align:center;width:60px;height:28px;padding:2px;font:12px sans-serif;background:#b0c4de;border:0px;border-radius:8px;pointer-events:none}\", \"\",{\"version\":3,\"sources\":[\"ScatterPanel.css\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB,kBAAkB,CAAC,aAAa,YAAY,CAAC,gBAAgB,CAAC,WAAW,CAAC,aAAa,WAAW,CAAC,mBAAmB,UAAU,CAAC,gBAAgB,WAAW,CAAC,iBAAiB,eAAe,CAAC,eAAe,YAAY,CAAC,eAAe,CAAC,gBAAgB,YAAY,CAAC,oBAAoB,UAAU,CAAC,kBAAkB,CAAC,gBAAgB,YAAY,CAAC,oBAAoB,UAAU,CAAC,kBAAkB,CAAC,cAAc,eAAe,CAAC,UAAU,CAAC,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,iBAAiB,eAAe,CAAC,kBAAkB,CAAC,UAAU,CAAC,aAAa,CAAC,cAAc,CAAC,gBAAgB,CAAC,mBAAmB,cAAc,CAAC,kBAAkB,0BAA0B,CAAC,aAAa,SAAS,CAAC,mBAAmB,WAAW,CAAC,gBAAgB,CAAC,aAAa,YAAY,CAAC,WAAW,WAAW,CAAC,YAAY,eAAe,CAAC,aAAa,YAAY,CAAC,YAAY,eAAe,CAAC,oBAAoB,UAAU,CAAC,oBAAoB,WAAW,CAAC,2BAA2B,cAAc,CAAC,gBAAgB,CAAC,qBAAqB,UAAU,CAAC,mBAAmB,qBAAqB,CAAC,yBAAyB,0BAA0B,CAAC,gBAAgB,iBAAiB,CAAC,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,UAAU,CAAC,iBAAiB,CAAC,mBAAmB\",\"file\":\"ScatterPanel.css\",\"sourcesContent\":[\".FieldSetEditor{margin-bottom:25px}.ScatterFlex{display:flex;flex-wrap:nowrap;padding:1px}.ScatterSize{width:115px}.ScatterSize input{width:55px}.ScatterDotSize{width:220px}.ScatterDotColor{padding-top:7px}.ScatterSelect{display:flex;min-width:160px}.ScatterExtents{display:flex}.ScatterExtentLimit{width:90px;padding-right:20px}.ScatterMargins{display:flex}.ScatterMarginLimit{width:90px;padding-right:20px}.ScatterLabel{padding-top:6px;width:90px;color:#9fa7b3;font-size:12px;text-align:center}.ScatterCheckbox{padding-top:6px;padding-right:10px;width:75px;color:#9fa7b3;font-size:12px;text-align:right}.ScatterFlex label{margin-top:5px}.ScatterSetHidden{fill:rgba(119,119,119,.25)}.ScatterLine{fill:none}.ScatterLineHidden{opacity:.25;stroke-width:1px}.TitleEditor{display:flex}.TitleText{width:160px}.TitleColor{padding-top:7px}.LabelEditor{display:flex}.LabelColor{padding-top:7px}.ReferenceLineValue{width:65px}.ReferenceLineLabel{width:100px}.ReferenceLineDeleteButton{margin-top:4px;margin-left:20px}.ScatterLegend input{width:50px}.ScatterLegendText{border:1px solid #fff}.ScatterLegendTextHidden{fill:rgba(119,119,119,.25)}.ScatterTooltip{position:absolute;text-align:center;width:60px;height:28px;padding:2px;font:12px sans-serif;background:#b0c4de;border:0px;border-radius:8px;pointer-events:none}\"]}]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import * as React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { Input } from '@grafana/ui';\nimport { Extents } from '../types/Extents';\n\ninterface Props extends StandardEditorProps<Extents> { }\n\nexport const ExtentsEditor: React.FC<Props> = ({ value, onChange }) => (\n  <div className=\"ScatterExtents\">\n    <div className=\"ScatterExtentLimit\">\n      <Input\n        type=\"number\"\n        value={value.min}\n        title=\"Axis Min (leave blank for auto)\"\n        onChange={(e) => {\n          value.min = (e.target as HTMLInputElement).valueAsNumber;\n          onChange(value);\n        }}\n      />\n    </div>\n    <div className=\"ScatterExtentLimit\">\n      <Input\n        type=\"number\"\n        value={value.max}\n        title=\"Axis Max (leave blank for auto)\"\n        onChange={(e) => {\n          value.max = (e.target as HTMLInputElement).valueAsNumber;\n          onChange(value);\n        }}\n      />\n    </div>\n  </div>\n);\n","import * as React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { Input } from '@grafana/ui';\nimport { MarginPair } from '../types/MarginPair';\n\ninterface Props extends StandardEditorProps<MarginPair> { }\n\nexport const MarginPairEditor: React.FC<Props> = ({ value, onChange }) => (\n  <div className=\"ScatterMargins\">\n    <div className=\"ScatterMarginLimit\">\n      <Input\n        type=\"number\"\n        value={value.lower}\n//        title=\"Left Margin\"\n        onChange={(e) => {\n          value.lower = (e.target as HTMLInputElement).valueAsNumber;\n          onChange(value);\n        }}\n      />\n    </div>\n    <div className=\"ScatterExtentLimit\">\n      <Input\n        className=\"ScatterMarginLimit\"\n        type=\"number\"\n        value={value.upper}\n//        title=\"Right Margin\"\n        onChange={(e) => {\n          value.upper = (e.target as HTMLInputElement).valueAsNumber;\n          onChange(value);\n        }}\n      />\n    </div>\n  </div>\n);\n","import React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { Checkbox, ColorPicker, Input } from '@grafana/ui';\nimport { Title } from '../types/Title';\n\ninterface Props extends StandardEditorProps<Title> {}\n\nexport const TitleEditor: React.FC<Props> = ({ value, onChange }) => {\n  const color = value.textSize > 0 ?\n    (\n      <div className=\"TitleColor\">\n        <ColorPicker\n          color={value.color}\n          enableNamedColors={false}\n          onChange={(e) => {\n            value.color = e;\n            onChange(value);\n          }}\n        />\n      </div>\n    ) : null;\n\n  return (\n    <div className=\"TitleEditor\">\n      <div className=\"TitleText\">\n        <Input\n          type=\"string\"\n          value={value.text}\n          onChange={(e) => {\n            value.text = (e.target as HTMLInputElement).value;\n            onChange(value);\n          }}\n        />\n      </div>\n      <div className=\"ScatterFlex ScatterSize\">\n        <div className=\"ScatterLabel\">Size</div>\n        <Input\n          type=\"number\"\n          min={0}\n          max={10}\n          title=\"Set size of text\"\n          value={value.textSize}\n          onChange={(e) => {\n            value.textSize = (e.target as HTMLInputElement).valueAsNumber;\n            onChange(value);\n          }}\n        />\n      </div>\n      {color}\n\n      <div className=\"ScatterFlex\">\n        <div className=\"ScatterCheckbox\" title=\"Rotate Y Axis title\">Rotate</div>\n        <Checkbox\n          value={value.rotated}\n          onChange={(e) => {\n            value.rotated = e.currentTarget.checked;\n            onChange(value);\n          }}\n        />\n      </div>\n\n      <div className=\"ScatterFlex\">\n        <div className=\"ScatterCheckbox\" title=\"Log Scale\">Log Scale</div>\n        <Checkbox\n          value={value.logScale}\n          onChange={(e) => {\n            value.logScale = e.currentTarget.checked;\n            onChange(value);\n          }}\n        />\n      </div>\n\n      <div className=\"ScatterFlex ScatterSize\">\n        <div className=\"ScatterLabel\">Tick Size</div>\n        <Input\n          type=\"number\"\n          min={0}\n          max={10}\n          title=\"Set size of text\"\n          value={value.fontSize}\n          onChange={(e) => {\n            value.fontSize = (e.target as HTMLInputElement).valueAsNumber;\n            onChange(value);\n          }}\n        />\n      </div>\n      <div className=\"LabelColor\">\n        <ColorPicker\n          color={value.fontColor}\n          enableNamedColors={false}\n          onChange={(e) => {\n            value.fontColor = e;\n            onChange(value);\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { Select, Input, ColorPicker } from '@grafana/ui';\nimport { Label } from '../types/Label';\n\ninterface Props extends StandardEditorProps<Label> { }\n\nexport const LabelEditor: React.FC<Props> = ({ onChange, context }) => {\n  if (\n    context.data\n    && context.data.length > 0) {\n    const { label } = context.options;\n    const options = context.data\n      .flatMap((frame) => frame.fields)\n      .map((field, index) => ({\n        label: field.config?.displayName ? field.config.displayName : field.name,\n        value: index,\n        valid: field.type === 'string',\n      }))\n      .filter((o) => o.valid);\n\n    const color = label.col >= 0\n      ?\n      (\n        <div className=\"ScatterFlex\">\n          <div className=\"ScatterFlex ScatterSize\">\n            <div className=\"ScatterLabel\">Size</div>\n            <Input\n              type=\"number\"\n              min={1}\n              max={10}\n              title=\"Set size of text\"\n              value={label.textSize}\n              onChange={(e) => {\n                label.textSize = (e.target as HTMLInputElement).valueAsNumber;\n                onChange(label);\n              }}\n            />\n          </div>\n\n          <div className=\"LabelColor\">\n            <ColorPicker\n              color={label.color}\n              enableNamedColors={false}\n              onChange={(e) => {\n                label.color = e;\n                onChange(label);\n              }}\n            />\n          </div>\n        </div>\n      )\n      : null;\n\n    return (\n      <div className=\"LabelEditor\">\n        <div className=\"ScatterFlex\">\n          <div className=\"ScatterSelect\">\n            <Select<number>\n              isLoading={false}\n              isClearable\n              value={label.col}\n              onChange={(e) => {\n                label.col = e ? e.value as number : -1;\n                onChange(label);\n              }}\n              options={options}\n            />\n          </div>\n        </div>\n        {color}\n      </div>\n    );\n  }\n\n  return <Select onChange={() => { }} disabled />;\n};\n","import React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { Input } from '@grafana/ui';\nimport { Legend } from '../types/Legend';\n\ninterface Props extends StandardEditorProps<Legend> { }\n\nexport const LegendEditor: React.FC<Props> = ({ value, onChange }) => {\n  return (\n    <div className=\"ScatterFlex\">\n      <div className=\"ScatterFlex ScatterSize\">\n        <div className=\"ScatterLabel\">Size</div>\n        <Input\n          className=\"ScatterLegendSize\"\n          type=\"number\"\n          value={value.size}\n          min={0}\n          max={10}\n          title=\"Legend Text Size\"\n          onChange={(e) => {\n            value.size = (e.target as HTMLInputElement).valueAsNumber;\n            onChange(value);\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { ColorPicker, Input } from '@grafana/ui';\nimport { Border } from '../types/Border';\n\ninterface Props extends StandardEditorProps<Border> { }\n\nexport const BorderEditor: React.FC<Props> = ({ value, onChange }) => {\n  const color = value.size > 0 ?\n    (\n      <div className=\"ScatterDotColor\">\n        <ColorPicker\n          color={value.color}\n          enableNamedColors={false}\n          onChange={(e: string) => {\n            value.color = e;\n            onChange(value);\n          }}\n        />\n      </div>\n    )\n    : null;\n\n  return (\n    <div className=\"ScatterFlex\">\n      <div className=\"ScatterFlex ScatterSize\">\n        <div className=\"ScatterLabel\">Size</div>\n        <Input\n          type=\"number\"\n          min={0}\n          max={10}\n          title=\"Border Line width\"\n          value={value.size}\n          onChange={(e) => {\n            value.size = (e.target as HTMLInputElement).valueAsNumber;\n            onChange(value);\n          }}\n        />\n      </div>\n      {color}\n    </div>\n  );\n};\n","import * as React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { ColorPicker } from '@grafana/ui';\nimport { Grid } from '../types/Grid';\n\ninterface Props extends StandardEditorProps<Grid> { }\n\nexport const GridEditor: React.FC<Props> = ({ value, onChange }) => (\n  <div className=\"ScatterBorder ScatterFlex\">\n    <div className=\"ScatterFlex\">\n      <div className=\"ScatterCheckbox\">Color</div>\n      <div className=\"ScatterDotColor\">\n        <ColorPicker\n          color={value.color}\n          enableNamedColors={false}\n          onChange={(e: string) => {\n            value.color = e;\n            onChange(value);\n          }}\n        />\n      </div>\n    </div>\n  </div>\n);\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class Border {\n  constructor(\n    public color: string,\n    public size: number,\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class XAxis {\n  constructor(\n    public col: number,\n    public inverted: boolean,\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class MarginPair {\n  constructor(\n    public lower: number,\n    public upper: number,\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class Label {\n  constructor(\n    public col: number,\n    public color: string,\n    public textSize: number,\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class Title {\n  constructor(\n    public text: string,\n    public color: string,\n    public textSize: number,\n    public rotated: boolean,\n    public logScale: boolean,\n    public fontSize: number,\n    public fontColor: string,\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class Grid {\n  constructor(\n    public color: string,\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class Legend {\n  constructor(\n    public show: boolean,\n    public size: number,\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class Extents {\n  constructor(\n    public min: number,\n    public max: number,\n  ) {\n  }\n}\n","const toString = Object.prototype.toString;\n\nexport default function isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n","import isAnyArray from 'is-any-array';\n\nexport { default as maybeToPrecision } from './maybeToPrecision';\nexport { default as checkArrayLength } from './checkArrayLength';\n\nexport default class BaseRegression {\n  constructor() {\n    if (new.target === BaseRegression) {\n      throw new Error('BaseRegression must be subclassed');\n    }\n  }\n\n  predict(x) {\n    if (typeof x === 'number') {\n      return this._predict(x);\n    } else if (isAnyArray(x)) {\n      const y = [];\n      for (let i = 0; i < x.length; i++) {\n        y.push(this._predict(x[i]));\n      }\n      return y;\n    } else {\n      throw new TypeError('x must be a number or array');\n    }\n  }\n\n  _predict() {\n    throw new Error('_predict must be implemented');\n  }\n\n  train() {\n    // Do nothing for this package\n  }\n\n  toString() {\n    return '';\n  }\n\n  toLaTeX() {\n    return '';\n  }\n\n  /**\n   * Return the correlation coefficient of determination (r) and chi-square.\n   * @param {Array<number>} x\n   * @param {Array<number>} y\n   * @return {object}\n   */\n  score(x, y) {\n    if (!isAnyArray(x) || !isAnyArray(y) || x.length !== y.length) {\n      throw new Error('x and y must be arrays of the same length');\n    }\n\n    const n = x.length;\n    const y2 = new Array(n);\n    for (let i = 0; i < n; i++) {\n      y2[i] = this._predict(x[i]);\n    }\n\n    let xSum = 0;\n    let ySum = 0;\n    let chi2 = 0;\n    let rmsd = 0;\n    let xSquared = 0;\n    let ySquared = 0;\n    let xY = 0;\n    for (let i = 0; i < n; i++) {\n      xSum += y2[i];\n      ySum += y[i];\n      xSquared += y2[i] * y2[i];\n      ySquared += y[i] * y[i];\n      xY += y2[i] * y[i];\n      if (y[i] !== 0) {\n        chi2 += ((y[i] - y2[i]) * (y[i] - y2[i])) / y[i];\n      }\n      rmsd += (y[i] - y2[i]) * (y[i] - y2[i]);\n    }\n\n    const r =\n      (n * xY - xSum * ySum) /\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\n\n    return {\n      r: r,\n      r2: r * r,\n      chi2: chi2,\n      rmsd: Math.sqrt(rmsd / n),\n    };\n  }\n}\n","import isAnyArray from 'is-any-array';\n\nexport default function checkArraySize(x, y) {\n  if (!isAnyArray(x) || !isAnyArray(y)) {\n    throw new TypeError('x and y must be arrays');\n  }\n  if (x.length !== y.length) {\n    throw new RangeError('x and y arrays must have the same length');\n  }\n}\n","export default function maybeToPrecision(value, digits) {\n  if (value < 0) {\n    value = 0 - value;\n    if (typeof digits === 'number') {\n      return `- ${value.toPrecision(digits)}`;\n    } else {\n      return `- ${value.toString()}`;\n    }\n  } else {\n    if (typeof digits === 'number') {\n      return value.toPrecision(digits);\n    } else {\n      return value.toString();\n    }\n  }\n}\n","import BaseRegression, {\r\n  checkArrayLength,\r\n  maybeToPrecision,\r\n} from 'ml-regression-base';\r\n\r\nexport default class SimpleLinearRegression extends BaseRegression {\r\n  constructor(x, y) {\r\n    super();\r\n    if (x === true) {\r\n      this.slope = y.slope;\r\n      this.intercept = y.intercept;\r\n      this.coefficients = [y.intercept, y.slope];\r\n    } else {\r\n      checkArrayLength(x, y);\r\n      regress(this, x, y);\r\n    }\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: 'simpleLinearRegression',\r\n      slope: this.slope,\r\n      intercept: this.intercept,\r\n    };\r\n  }\r\n\r\n  _predict(x) {\r\n    return this.slope * x + this.intercept;\r\n  }\r\n\r\n  computeX(y) {\r\n    return (y - this.intercept) / this.slope;\r\n  }\r\n\r\n  toString(precision) {\r\n    let result = 'f(x) = ';\r\n    if (this.slope !== 0) {\r\n      const xFactor = maybeToPrecision(this.slope, precision);\r\n      result += `${xFactor === '1' ? '' : `${xFactor} * `}x`;\r\n      if (this.intercept !== 0) {\r\n        const absIntercept = Math.abs(this.intercept);\r\n        const operator = absIntercept === this.intercept ? '+' : '-';\r\n        result += ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\r\n      }\r\n    } else {\r\n      result += maybeToPrecision(this.intercept, precision);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  toLaTeX(precision) {\r\n    return this.toString(precision);\r\n  }\r\n\r\n  static load(json) {\r\n    if (json.name !== 'simpleLinearRegression') {\r\n      throw new TypeError('not a SLR model');\r\n    }\r\n    return new SimpleLinearRegression(true, json);\r\n  }\r\n}\r\n\r\nfunction regress(slr, x, y) {\r\n  const n = x.length;\r\n  let xSum = 0;\r\n  let ySum = 0;\r\n\r\n  let xSquared = 0;\r\n  let xY = 0;\r\n\r\n  for (let i = 0; i < n; i++) {\r\n    xSum += x[i];\r\n    ySum += y[i];\r\n    xSquared += x[i] * x[i];\r\n    xY += x[i] * y[i];\r\n  }\r\n\r\n  const numerator = n * xY - xSum * ySum;\r\n  slr.slope = numerator / (n * xSquared - xSum * xSum);\r\n  slr.intercept = (1 / n) * ySum - slr.slope * (1 / n) * xSum;\r\n  slr.coefficients = [slr.intercept, slr.slope];\r\n}\r\n","import BaseRegression, {\r\n  checkArrayLength,\r\n  maybeToPrecision,\r\n} from 'ml-regression-base';\r\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\r\n\r\nexport default class ExponentialRegression extends BaseRegression {\r\n  constructor(x, y) {\r\n    super();\r\n    if (x === true) {\r\n      this.A = y.A;\r\n      this.B = y.B;\r\n    } else {\r\n      checkArrayLength(x, y);\r\n      regress(this, x, y);\r\n    }\r\n  }\r\n\r\n  _predict(input) {\r\n    return this.B * Math.exp(input * this.A);\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: 'exponentialRegression',\r\n      A: this.A,\r\n      B: this.B,\r\n    };\r\n  }\r\n\r\n  toString(precision) {\r\n    return `f(x) = ${maybeToPrecision(\r\n      this.B,\r\n      precision,\r\n    )} * e^(${maybeToPrecision(this.A, precision)} * x)`;\r\n  }\r\n\r\n  toLaTeX(precision) {\r\n    if (this.A >= 0) {\r\n      return `f(x) = ${maybeToPrecision(\r\n        this.B,\r\n        precision,\r\n      )}e^{${maybeToPrecision(this.A, precision)}x}`;\r\n    } else {\r\n      return `f(x) = \\\\frac{${maybeToPrecision(\r\n        this.B,\r\n        precision,\r\n      )}}{e^{${maybeToPrecision(-this.A, precision)}x}}`;\r\n    }\r\n  }\r\n\r\n  static load(json) {\r\n    if (json.name !== 'exponentialRegression') {\r\n      throw new TypeError('not a exponential regression model');\r\n    }\r\n    return new ExponentialRegression(true, json);\r\n  }\r\n}\r\n\r\nfunction regress(er, x, y) {\r\n  const n = x.length;\r\n  const yl = new Array(n);\r\n  for (let i = 0; i < n; i++) {\r\n    yl[i] = Math.log(y[i]);\r\n  }\r\n\r\n  const linear = new SimpleLinearRegression(x, yl);\r\n  er.A = linear.slope;\r\n  er.B = Math.exp(linear.intercept);\r\n}\r\n","import isArray from 'is-any-array';\n\nfunction max(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var maxValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] > maxValue) maxValue = input[i];\n  }\n\n  return maxValue;\n}\n\nexport default max;\n","import isArray from 'is-any-array';\n\nfunction min(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var minValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] < minValue) minValue = input[i];\n  }\n\n  return minValue;\n}\n\nexport default min;\n","import isArray from 'is-any-array';\nimport max from 'ml-array-max';\nimport min from 'ml-array-min';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport { rescale as default };\n","const indent = ' '.repeat(2);\nconst indentData = ' '.repeat(4);\n\nexport function inspectMatrix() {\n  return inspectMatrixWithOptions(this);\n}\n\nexport function inspectMatrixWithOptions(matrix, options = {}) {\n  const { maxRows = 15, maxColumns = 10, maxNumSize = 8 } = options;\n  return `${matrix.constructor.name} {\n${indent}[\n${indentData}${inspectData(matrix, maxRows, maxColumns, maxNumSize)}\n${indent}]\n${indent}rows: ${matrix.rows}\n${indent}columns: ${matrix.columns}\n}`;\n}\n\nfunction inspectData(matrix, maxRows, maxColumns, maxNumSize) {\n  const { rows, columns } = matrix;\n  const maxI = Math.min(rows, maxRows);\n  const maxJ = Math.min(columns, maxColumns);\n  const result = [];\n  for (let i = 0; i < maxI; i++) {\n    let line = [];\n    for (let j = 0; j < maxJ; j++) {\n      line.push(formatNumber(matrix.get(i, j), maxNumSize));\n    }\n    result.push(`${line.join(' ')}`);\n  }\n  if (maxJ !== columns) {\n    result[result.length - 1] += ` ... ${columns - maxColumns} more columns`;\n  }\n  if (maxI !== rows) {\n    result.push(`... ${rows - maxRows} more rows`);\n  }\n  return result.join(`\\n${indentData}`);\n}\n\nfunction formatNumber(num, maxNumSize) {\n  const numStr = String(num);\n  if (numStr.length <= maxNumSize) {\n    return numStr.padEnd(maxNumSize, ' ');\n  }\n  const precise = num.toPrecision(maxNumSize - 2);\n  if (precise.length <= maxNumSize) {\n    return precise;\n  }\n  const exponential = num.toExponential(maxNumSize - 2);\n  const eIndex = exponential.indexOf('e');\n  const e = exponential.slice(eIndex);\n  return exponential.slice(0, maxNumSize - e.length) + e;\n}\n","/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkRowIndex(matrix, index, outer) {\n  let max = outer ? matrix.rows : matrix.rows - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Row index out of range');\n  }\n}\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkColumnIndex(matrix, index, outer) {\n  let max = outer ? matrix.columns : matrix.columns - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Column index out of range');\n  }\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkRowVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.columns) {\n    throw new RangeError(\n      'vector size must be the same as the number of columns',\n    );\n  }\n  return vector;\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkColumnVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.rows) {\n    throw new RangeError('vector size must be the same as the number of rows');\n  }\n  return vector;\n}\n\nexport function checkIndices(matrix, rowIndices, columnIndices) {\n  return {\n    row: checkRowIndices(matrix, rowIndices),\n    column: checkColumnIndices(matrix, columnIndices),\n  };\n}\n\nexport function checkRowIndices(matrix, rowIndices) {\n  if (typeof rowIndices !== 'object') {\n    throw new TypeError('unexpected type for row indices');\n  }\n\n  let rowOut = rowIndices.some((r) => {\n    return r < 0 || r >= matrix.rows;\n  });\n\n  if (rowOut) {\n    throw new RangeError('row indices are out of range');\n  }\n\n  if (!Array.isArray(rowIndices)) rowIndices = Array.from(rowIndices);\n\n  return rowIndices;\n}\n\nexport function checkColumnIndices(matrix, columnIndices) {\n  if (typeof columnIndices !== 'object') {\n    throw new TypeError('unexpected type for column indices');\n  }\n\n  let columnOut = columnIndices.some((c) => {\n    return c < 0 || c >= matrix.columns;\n  });\n\n  if (columnOut) {\n    throw new RangeError('column indices are out of range');\n  }\n  if (!Array.isArray(columnIndices)) columnIndices = Array.from(columnIndices);\n\n  return columnIndices;\n}\n\nexport function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n  if (arguments.length !== 5) {\n    throw new RangeError('expected 4 arguments');\n  }\n  checkNumber('startRow', startRow);\n  checkNumber('endRow', endRow);\n  checkNumber('startColumn', startColumn);\n  checkNumber('endColumn', endColumn);\n  if (\n    startRow > endRow ||\n    startColumn > endColumn ||\n    startRow < 0 ||\n    startRow >= matrix.rows ||\n    endRow < 0 ||\n    endRow >= matrix.rows ||\n    startColumn < 0 ||\n    startColumn >= matrix.columns ||\n    endColumn < 0 ||\n    endColumn >= matrix.columns\n  ) {\n    throw new RangeError('Submatrix indices are out of range');\n  }\n}\n\nexport function newArray(length, value = 0) {\n  let array = [];\n  for (let i = 0; i < length; i++) {\n    array.push(value);\n  }\n  return array;\n}\n\nfunction checkNumber(name, value) {\n  if (typeof value !== 'number') {\n    throw new TypeError(`${name} must be a number`);\n  }\n}\n\nexport function checkNonEmpty(matrix) {\n  if (matrix.isEmpty()) {\n    throw new Error('Empty matrix has no elements to index');\n  }\n}\n","import rescale from 'ml-array-rescale';\n\nimport { inspectMatrix, inspectMatrixWithOptions } from './inspect';\nimport { installMathOperations } from './mathOperations';\nimport {\n  sumByRow,\n  sumByColumn,\n  sumAll,\n  productByRow,\n  productByColumn,\n  productAll,\n  varianceByRow,\n  varianceByColumn,\n  varianceAll,\n  centerByRow,\n  centerByColumn,\n  centerAll,\n  scaleByRow,\n  scaleByColumn,\n  scaleAll,\n  getScaleByRow,\n  getScaleByColumn,\n  getScaleAll,\n} from './stat';\nimport {\n  checkRowVector,\n  checkRowIndex,\n  checkColumnIndex,\n  checkColumnVector,\n  checkRange,\n  checkIndices,\n  checkNonEmpty,\n} from './util';\n\nexport class AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    let length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    let newMatrix = new Matrix(newRows, newColumns);\n    for (let row = 0; row < newRows; row++) {\n      for (let column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    let vector = new Matrix(1, newData.length);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    let vector = new Matrix(newData.length, 1);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let interval = max - min;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        let value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    let min = Math.min(rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    let l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    let min = Math.min(l, rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new this(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    let array = [];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    let copy = [];\n    for (let i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (let j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isEmpty() {\n    return this.rows === 0 || this.columns === 0;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while (h < result.rows && k < result.columns) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while (p < n && pivot === false) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    let matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    let row = [];\n    for (let i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (let i = 0; i < this.columns; i++) {\n      let temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    let column = [];\n    for (let i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (let i = 0; i < this.rows; i++) {\n      let temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max() {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  maxIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min() {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  minIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    let min = Math.min(this.rows, this.columns);\n    let diag = [];\n    for (let i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    let result = 0;\n    if (type === 'max') {\n      return this.max();\n    } else if (type === 'frobenius') {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j < this.columns; j++) {\n          result = result + this.get(i, j) * this.get(i, j);\n        }\n      }\n      return Math.sqrt(result);\n    } else {\n      throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    let sum = 0;\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    let vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    let dot = 0;\n    for (let i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.columns;\n\n    let result = new Matrix(m, p);\n\n    let Bcolj = new Float64Array(n);\n    for (let j = 0; j < p; j++) {\n      for (let k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (let i = 0; i < m; i++) {\n        let s = 0;\n        for (let k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    let x = this.clone();\n    let r1 = x.rows;\n    let c1 = x.columns;\n    let r2 = y.rows;\n    let c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`,\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      let r = mat.rows;\n      let c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        let resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    let r = Math.max(r1, r2);\n    let c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      let halfRows = parseInt(a.rows / 2, 10);\n      let halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      let a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      let b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      let a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      let b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      let a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      let b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      let a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      let b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      let m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols,\n      );\n      let m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      let m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      let m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      let m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      let m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols,\n      );\n      let m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols,\n      );\n\n      // Combine intermediate values into the output.\n      let c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      let c12 = AbstractMatrix.add(m3, m5);\n      let c21 = AbstractMatrix.add(m2, m4);\n      let c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      let resultat = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      resultat = resultat.setSubMatrix(c11, 0, 0);\n      resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n      resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n      resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n      return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      if (row.length > 0) {\n        rescale(row, { min, max, output: row });\n      }\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      if (column.length) {\n        rescale(column, {\n          min: min,\n          max: max,\n          output: column,\n        });\n      }\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < middle; j++) {\n        let first = this.get(i, j);\n        let last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (let j = 0; j < this.columns; j++) {\n      for (let i = 0; i < middle; i++) {\n        let first = this.get(i, j);\n        let last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.rows;\n    let q = other.columns;\n\n    let result = new Matrix(m * p, n * q);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        for (let k = 0; k < p; k++) {\n          for (let l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  kroneckerSum(other) {\n    other = Matrix.checkMatrix(other);\n    if (!this.isSquare() || !other.isSquare()) {\n      throw new Error('Kronecker Sum needs two Square Matrices');\n    }\n    let m = this.rows;\n    let n = other.rows;\n    let AxI = this.kroneckerProduct(Matrix.eye(n, n));\n    let IxB = Matrix.eye(m, m).kroneckerProduct(other);\n    return AxI.add(IxB);\n  }\n\n  transpose() {\n    let result = new Matrix(this.columns, this.rows);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    let newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1,\n    );\n    for (let i = startRow; i <= endRow; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (matrix.isEmpty()) {\n      return this;\n    }\n    let endRow = startRow + matrix.rows - 1;\n    let endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    let indices = checkIndices(this, rowIndices, columnIndices);\n    let newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (let i = 0; i < indices.row.length; i++) {\n      let rowIndex = indices.row[i];\n      for (let j = 0; j < indices.column.length; j++) {\n        let columnIndex = indices.column[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    let min = Math.min(this.rows, this.columns);\n    let trace = 0;\n    for (let i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let row = 0; row < this.rows; row++) {\n      for (let column = 0; column < this.columns; column++) {\n        newMatrix.set(row, column, this.get(row, column));\n      }\n    }\n    return newMatrix;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (let i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      }\n      case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  toString(options) {\n    return inspectMatrixWithOptions(this, options);\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nexport default class Matrix extends AbstractMatrix {\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      // eslint-disable-next-line no-constructor-return\n      return nRows.clone();\n    } else if (Number.isInteger(nRows) && nRows >= 0) {\n      // Create an empty matrix\n      this.data = [];\n      if (Number.isInteger(nColumns) && nColumns >= 0) {\n        for (let i = 0; i < nRows; i++) {\n          this.data.push(new Float64Array(nColumns));\n        }\n      } else {\n        throw new TypeError('nColumns must be a positive integer');\n      }\n    } else if (Array.isArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = nRows ? arrayData[0].length : 0;\n      if (typeof nColumns !== 'number') {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element',\n        );\n      }\n      this.data = [];\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array',\n      );\n    }\n    this.rows = nRows;\n    this.columns = nColumns;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n","import { newArray } from './util';\n\nexport function sumByRow(matrix) {\n  let sum = newArray(matrix.rows);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumByColumn(matrix) {\n  let sum = newArray(matrix.columns);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumAll(matrix) {\n  let v = 0;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v += matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function productByRow(matrix) {\n  let sum = newArray(matrix.rows, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productByColumn(matrix) {\n  let sum = newArray(matrix.columns, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productAll(matrix) {\n  let v = 1;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v *= matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function varianceByRow(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let i = 0; i < rows; i++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean[i];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / cols) / (cols - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / cols) / cols);\n    }\n  }\n  return variance;\n}\n\nexport function varianceByColumn(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let j = 0; j < cols; j++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let i = 0; i < rows; i++) {\n      x = matrix.get(i, j) - mean[j];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / rows) / (rows - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / rows) / rows);\n    }\n  }\n  return variance;\n}\n\nexport function varianceAll(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const size = rows * cols;\n\n  let sum1 = 0;\n  let sum2 = 0;\n  let x = 0;\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean;\n      sum1 += x;\n      sum2 += x * x;\n    }\n  }\n  if (unbiased) {\n    return (sum2 - (sum1 * sum1) / size) / (size - 1);\n  } else {\n    return (sum2 - (sum1 * sum1) / size) / size;\n  }\n}\n\nexport function centerByRow(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[i]);\n    }\n  }\n}\n\nexport function centerByColumn(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[j]);\n    }\n  }\n}\n\nexport function centerAll(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean);\n    }\n  }\n}\n\nexport function getScaleByRow(matrix) {\n  const scale = [];\n  for (let i = 0; i < matrix.rows; i++) {\n    let sum = 0;\n    for (let j = 0; j < matrix.columns; j++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.columns - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByRow(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[i]);\n    }\n  }\n}\n\nexport function getScaleByColumn(matrix) {\n  const scale = [];\n  for (let j = 0; j < matrix.columns; j++) {\n    let sum = 0;\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.rows - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByColumn(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[j]);\n    }\n  }\n}\n\nexport function getScaleAll(matrix) {\n  const divider = matrix.size - 1;\n  let sum = 0;\n  for (let j = 0; j < matrix.columns; j++) {\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / divider;\n    }\n  }\n  return Math.sqrt(sum);\n}\n\nexport function scaleAll(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale);\n    }\n  }\n}\n","export function installMathOperations(AbstractMatrix, Matrix) {\n  AbstractMatrix.prototype.add = function add(value) {\n    if (typeof value === 'number') return this.addS(value);\n    return this.addM(value);\n  };\n\n  AbstractMatrix.prototype.addS = function addS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.addM = function addM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.add = function add(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.add(value);\n  };\n\n  AbstractMatrix.prototype.sub = function sub(value) {\n    if (typeof value === 'number') return this.subS(value);\n    return this.subM(value);\n  };\n\n  AbstractMatrix.prototype.subS = function subS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.subM = function subM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sub = function sub(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sub(value);\n  };\n  AbstractMatrix.prototype.subtract = AbstractMatrix.prototype.sub;\n  AbstractMatrix.prototype.subtractS = AbstractMatrix.prototype.subS;\n  AbstractMatrix.prototype.subtractM = AbstractMatrix.prototype.subM;\n  AbstractMatrix.subtract = AbstractMatrix.sub;\n\n  AbstractMatrix.prototype.mul = function mul(value) {\n    if (typeof value === 'number') return this.mulS(value);\n    return this.mulM(value);\n  };\n\n  AbstractMatrix.prototype.mulS = function mulS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.mulM = function mulM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mul = function mul(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mul(value);\n  };\n  AbstractMatrix.prototype.multiply = AbstractMatrix.prototype.mul;\n  AbstractMatrix.prototype.multiplyS = AbstractMatrix.prototype.mulS;\n  AbstractMatrix.prototype.multiplyM = AbstractMatrix.prototype.mulM;\n  AbstractMatrix.multiply = AbstractMatrix.mul;\n\n  AbstractMatrix.prototype.div = function div(value) {\n    if (typeof value === 'number') return this.divS(value);\n    return this.divM(value);\n  };\n\n  AbstractMatrix.prototype.divS = function divS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.divM = function divM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.div = function div(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.div(value);\n  };\n  AbstractMatrix.prototype.divide = AbstractMatrix.prototype.div;\n  AbstractMatrix.prototype.divideS = AbstractMatrix.prototype.divS;\n  AbstractMatrix.prototype.divideM = AbstractMatrix.prototype.divM;\n  AbstractMatrix.divide = AbstractMatrix.div;\n\n  AbstractMatrix.prototype.mod = function mod(value) {\n    if (typeof value === 'number') return this.modS(value);\n    return this.modM(value);\n  };\n\n  AbstractMatrix.prototype.modS = function modS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.modM = function modM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mod = function mod(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mod(value);\n  };\n  AbstractMatrix.prototype.modulus = AbstractMatrix.prototype.mod;\n  AbstractMatrix.prototype.modulusS = AbstractMatrix.prototype.modS;\n  AbstractMatrix.prototype.modulusM = AbstractMatrix.prototype.modM;\n  AbstractMatrix.modulus = AbstractMatrix.mod;\n\n  AbstractMatrix.prototype.and = function and(value) {\n    if (typeof value === 'number') return this.andS(value);\n    return this.andM(value);\n  };\n\n  AbstractMatrix.prototype.andS = function andS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.andM = function andM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.and = function and(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.and(value);\n  };\n\n  AbstractMatrix.prototype.or = function or(value) {\n    if (typeof value === 'number') return this.orS(value);\n    return this.orM(value);\n  };\n\n  AbstractMatrix.prototype.orS = function orS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.orM = function orM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.or = function or(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.or(value);\n  };\n\n  AbstractMatrix.prototype.xor = function xor(value) {\n    if (typeof value === 'number') return this.xorS(value);\n    return this.xorM(value);\n  };\n\n  AbstractMatrix.prototype.xorS = function xorS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.xorM = function xorM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.xor = function xor(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.xor(value);\n  };\n\n  AbstractMatrix.prototype.leftShift = function leftShift(value) {\n    if (typeof value === 'number') return this.leftShiftS(value);\n    return this.leftShiftM(value);\n  };\n\n  AbstractMatrix.prototype.leftShiftS = function leftShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.leftShiftM = function leftShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.leftShift = function leftShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.leftShift(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShift = function signPropagatingRightShift(value) {\n    if (typeof value === 'number') return this.signPropagatingRightShiftS(value);\n    return this.signPropagatingRightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftS = function signPropagatingRightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftM = function signPropagatingRightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.signPropagatingRightShift = function signPropagatingRightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.signPropagatingRightShift(value);\n  };\n\n  AbstractMatrix.prototype.rightShift = function rightShift(value) {\n    if (typeof value === 'number') return this.rightShiftS(value);\n    return this.rightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.rightShiftS = function rightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.rightShiftM = function rightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.rightShift = function rightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.rightShift(value);\n  };\n  AbstractMatrix.prototype.zeroFillRightShift = AbstractMatrix.prototype.rightShift;\n  AbstractMatrix.prototype.zeroFillRightShiftS = AbstractMatrix.prototype.rightShiftS;\n  AbstractMatrix.prototype.zeroFillRightShiftM = AbstractMatrix.prototype.rightShiftM;\n  AbstractMatrix.zeroFillRightShift = AbstractMatrix.rightShift;\n\n  AbstractMatrix.prototype.not = function not() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, ~(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.not = function not(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.not();\n  };\n\n  AbstractMatrix.prototype.abs = function abs() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.abs(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.abs = function abs(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.abs();\n  };\n\n  AbstractMatrix.prototype.acos = function acos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acos = function acos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acos();\n  };\n\n  AbstractMatrix.prototype.acosh = function acosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acosh = function acosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acosh();\n  };\n\n  AbstractMatrix.prototype.asin = function asin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asin = function asin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asin();\n  };\n\n  AbstractMatrix.prototype.asinh = function asinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asinh = function asinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asinh();\n  };\n\n  AbstractMatrix.prototype.atan = function atan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atan = function atan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atan();\n  };\n\n  AbstractMatrix.prototype.atanh = function atanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atanh = function atanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atanh();\n  };\n\n  AbstractMatrix.prototype.cbrt = function cbrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cbrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cbrt = function cbrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cbrt();\n  };\n\n  AbstractMatrix.prototype.ceil = function ceil() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.ceil(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.ceil = function ceil(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.ceil();\n  };\n\n  AbstractMatrix.prototype.clz32 = function clz32() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.clz32(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.clz32 = function clz32(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.clz32();\n  };\n\n  AbstractMatrix.prototype.cos = function cos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cos = function cos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cos();\n  };\n\n  AbstractMatrix.prototype.cosh = function cosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cosh = function cosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cosh();\n  };\n\n  AbstractMatrix.prototype.exp = function exp() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.exp(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.exp = function exp(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.exp();\n  };\n\n  AbstractMatrix.prototype.expm1 = function expm1() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.expm1(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.expm1 = function expm1(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.expm1();\n  };\n\n  AbstractMatrix.prototype.floor = function floor() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.floor(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.floor = function floor(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.floor();\n  };\n\n  AbstractMatrix.prototype.fround = function fround() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.fround(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.fround = function fround(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.fround();\n  };\n\n  AbstractMatrix.prototype.log = function log() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log = function log(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log();\n  };\n\n  AbstractMatrix.prototype.log1p = function log1p() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log1p(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log1p = function log1p(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log1p();\n  };\n\n  AbstractMatrix.prototype.log10 = function log10() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log10(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log10 = function log10(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log10();\n  };\n\n  AbstractMatrix.prototype.log2 = function log2() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log2(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log2 = function log2(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log2();\n  };\n\n  AbstractMatrix.prototype.round = function round() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.round(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.round = function round(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.round();\n  };\n\n  AbstractMatrix.prototype.sign = function sign() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sign(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sign = function sign(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sign();\n  };\n\n  AbstractMatrix.prototype.sin = function sin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sin = function sin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sin();\n  };\n\n  AbstractMatrix.prototype.sinh = function sinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sinh = function sinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sinh();\n  };\n\n  AbstractMatrix.prototype.sqrt = function sqrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sqrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sqrt = function sqrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sqrt();\n  };\n\n  AbstractMatrix.prototype.tan = function tan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tan = function tan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tan();\n  };\n\n  AbstractMatrix.prototype.tanh = function tanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tanh = function tanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tanh();\n  };\n\n  AbstractMatrix.prototype.trunc = function trunc() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.trunc(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.trunc = function trunc(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.trunc();\n  };\n\n  AbstractMatrix.pow = function pow(matrix, arg0) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.pow(arg0);\n  };\n\n  AbstractMatrix.prototype.pow = function pow(value) {\n    if (typeof value === 'number') return this.powS(value);\n    return this.powM(value);\n  };\n\n  AbstractMatrix.prototype.powS = function powS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), value));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.powM = function powM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), matrix.get(i, j)));\n      }\n    }\n    return this;\n  };\n}\n","import { AbstractMatrix } from '../matrix';\n\nexport default class BaseView extends AbstractMatrix {\n  constructor(matrix, rows, columns) {\n    super();\n    this.matrix = matrix;\n    this.rows = rows;\n    this.columns = columns;\n  }\n}\n","import BaseView from './base';\n\nexport default class MatrixTransposeView extends BaseView {\n  constructor(matrix) {\n    super(matrix, matrix.columns, matrix.rows);\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(columnIndex, rowIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(columnIndex, rowIndex);\n  }\n}\n","import { AbstractMatrix } from '../matrix';\n\nexport default class WrapperMatrix2D extends AbstractMatrix {\n  constructor(data) {\n    super();\n    this.data = data;\n    this.rows = data.length;\n    this.columns = data[0].length;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nexport default class LuDecomposition {\n  constructor(matrix) {\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n\n    let lu = matrix.clone();\n    let rows = lu.rows;\n    let columns = lu.columns;\n    let pivotVector = new Float64Array(rows);\n    let pivotSign = 1;\n    let i, j, k, p, s, t, v;\n    let LUcolj, kmax;\n\n    for (i = 0; i < rows; i++) {\n      pivotVector[i] = i;\n    }\n\n    LUcolj = new Float64Array(rows);\n\n    for (j = 0; j < columns; j++) {\n      for (i = 0; i < rows; i++) {\n        LUcolj[i] = lu.get(i, j);\n      }\n\n      for (i = 0; i < rows; i++) {\n        kmax = Math.min(i, j);\n        s = 0;\n        for (k = 0; k < kmax; k++) {\n          s += lu.get(i, k) * LUcolj[k];\n        }\n        LUcolj[i] -= s;\n        lu.set(i, j, LUcolj[i]);\n      }\n\n      p = j;\n      for (i = j + 1; i < rows; i++) {\n        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\n          p = i;\n        }\n      }\n\n      if (p !== j) {\n        for (k = 0; k < columns; k++) {\n          t = lu.get(p, k);\n          lu.set(p, k, lu.get(j, k));\n          lu.set(j, k, t);\n        }\n\n        v = pivotVector[p];\n        pivotVector[p] = pivotVector[j];\n        pivotVector[j] = v;\n\n        pivotSign = -pivotSign;\n      }\n\n      if (j < rows && lu.get(j, j) !== 0) {\n        for (i = j + 1; i < rows; i++) {\n          lu.set(i, j, lu.get(i, j) / lu.get(j, j));\n        }\n      }\n    }\n\n    this.LU = lu;\n    this.pivotVector = pivotVector;\n    this.pivotSign = pivotSign;\n  }\n\n  isSingular() {\n    let data = this.LU;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      if (data.get(j, j) === 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let lu = this.LU;\n    let rows = lu.rows;\n\n    if (rows !== value.rows) {\n      throw new Error('Invalid matrix dimensions');\n    }\n    if (this.isSingular()) {\n      throw new Error('LU matrix is singular');\n    }\n\n    let count = value.columns;\n    let X = value.subMatrixRow(this.pivotVector, 0, count - 1);\n    let columns = lu.columns;\n    let i, j, k;\n\n    for (k = 0; k < columns; k++) {\n      for (i = k + 1; i < columns; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    for (k = columns - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / lu.get(k, k));\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    return X;\n  }\n\n  get determinant() {\n    let data = this.LU;\n    if (!data.isSquare()) {\n      throw new Error('Matrix must be square');\n    }\n    let determinant = this.pivotSign;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      determinant *= data.get(j, j);\n    }\n    return determinant;\n  }\n\n  get lowerTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i > j) {\n          X.set(i, j, data.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, 1);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get upperTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i <= j) {\n          X.set(i, j, data.get(i, j));\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get pivotPermutationVector() {\n    return Array.from(this.pivotVector);\n  }\n}\n","export function hypotenuse(a, b) {\n  let r = 0;\n  if (Math.abs(a) > Math.abs(b)) {\n    r = b / a;\n    return Math.abs(a) * Math.sqrt(1 + r * r);\n  }\n  if (b !== 0) {\n    r = a / b;\n    return Math.abs(b) * Math.sqrt(1 + r * r);\n  }\n  return 0;\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class QrDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let qr = value.clone();\n    let m = value.rows;\n    let n = value.columns;\n    let rdiag = new Float64Array(n);\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      let nrm = 0;\n      for (i = k; i < m; i++) {\n        nrm = hypotenuse(nrm, qr.get(i, k));\n      }\n      if (nrm !== 0) {\n        if (qr.get(k, k) < 0) {\n          nrm = -nrm;\n        }\n        for (i = k; i < m; i++) {\n          qr.set(i, k, qr.get(i, k) / nrm);\n        }\n        qr.set(k, k, qr.get(k, k) + 1);\n        for (j = k + 1; j < n; j++) {\n          s = 0;\n          for (i = k; i < m; i++) {\n            s += qr.get(i, k) * qr.get(i, j);\n          }\n          s = -s / qr.get(k, k);\n          for (i = k; i < m; i++) {\n            qr.set(i, j, qr.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n      rdiag[k] = -nrm;\n    }\n\n    this.QR = qr;\n    this.Rdiag = rdiag;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let qr = this.QR;\n    let m = qr.rows;\n\n    if (value.rows !== m) {\n      throw new Error('Matrix row dimensions must agree');\n    }\n    if (!this.isFullRank()) {\n      throw new Error('Matrix is rank deficient');\n    }\n\n    let count = value.columns;\n    let X = value.clone();\n    let n = qr.columns;\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      for (j = 0; j < count; j++) {\n        s = 0;\n        for (i = k; i < m; i++) {\n          s += qr.get(i, k) * X.get(i, j);\n        }\n        s = -s / qr.get(k, k);\n        for (i = k; i < m; i++) {\n          X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n        }\n      }\n    }\n    for (k = n - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / this.Rdiag[k]);\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * qr.get(i, k));\n        }\n      }\n    }\n\n    return X.subMatrix(0, n - 1, 0, count - 1);\n  }\n\n  isFullRank() {\n    let columns = this.QR.columns;\n    for (let i = 0; i < columns; i++) {\n      if (this.Rdiag[i] === 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get upperTriangularMatrix() {\n    let qr = this.QR;\n    let n = qr.columns;\n    let X = new Matrix(n, n);\n    let i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        if (i < j) {\n          X.set(i, j, qr.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, this.Rdiag[i]);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get orthogonalMatrix() {\n    let qr = this.QR;\n    let rows = qr.rows;\n    let columns = qr.columns;\n    let X = new Matrix(rows, columns);\n    let i, j, k, s;\n\n    for (k = columns - 1; k >= 0; k--) {\n      for (i = 0; i < rows; i++) {\n        X.set(i, k, 0);\n      }\n      X.set(k, k, 1);\n      for (j = k; j < columns; j++) {\n        if (qr.get(k, k) !== 0) {\n          s = 0;\n          for (i = k; i < rows; i++) {\n            s += qr.get(i, k) * X.get(i, j);\n          }\n\n          s = -s / qr.get(k, k);\n\n          for (i = k; i < rows; i++) {\n            X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n    }\n    return X;\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class SingularValueDecomposition {\n  constructor(value, options = {}) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    if (value.isEmpty()) {\n      throw new Error('Matrix must be non-empty');\n    }\n\n    let m = value.rows;\n    let n = value.columns;\n\n    const {\n      computeLeftSingularVectors = true,\n      computeRightSingularVectors = true,\n      autoTranspose = false,\n    } = options;\n\n    let wantu = Boolean(computeLeftSingularVectors);\n    let wantv = Boolean(computeRightSingularVectors);\n\n    let swapped = false;\n    let a;\n    if (m < n) {\n      if (!autoTranspose) {\n        a = value.clone();\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose',\n        );\n      } else {\n        a = value.transpose();\n        m = a.rows;\n        n = a.columns;\n        swapped = true;\n        let aux = wantu;\n        wantu = wantv;\n        wantv = aux;\n      }\n    } else {\n      a = value.clone();\n    }\n\n    let nu = Math.min(m, n);\n    let ni = Math.min(m + 1, n);\n    let s = new Float64Array(ni);\n    let U = new Matrix(m, nu);\n    let V = new Matrix(n, n);\n\n    let e = new Float64Array(n);\n    let work = new Float64Array(m);\n\n    let si = new Float64Array(ni);\n    for (let i = 0; i < ni; i++) si[i] = i;\n\n    let nct = Math.min(m - 1, n);\n    let nrt = Math.max(0, Math.min(n - 2, m));\n    let mrc = Math.max(nct, nrt);\n\n    for (let k = 0; k < mrc; k++) {\n      if (k < nct) {\n        s[k] = 0;\n        for (let i = k; i < m; i++) {\n          s[k] = hypotenuse(s[k], a.get(i, k));\n        }\n        if (s[k] !== 0) {\n          if (a.get(k, k) < 0) {\n            s[k] = -s[k];\n          }\n          for (let i = k; i < m; i++) {\n            a.set(i, k, a.get(i, k) / s[k]);\n          }\n          a.set(k, k, a.get(k, k) + 1);\n        }\n        s[k] = -s[k];\n      }\n\n      for (let j = k + 1; j < n; j++) {\n        if (k < nct && s[k] !== 0) {\n          let t = 0;\n          for (let i = k; i < m; i++) {\n            t += a.get(i, k) * a.get(i, j);\n          }\n          t = -t / a.get(k, k);\n          for (let i = k; i < m; i++) {\n            a.set(i, j, a.get(i, j) + t * a.get(i, k));\n          }\n        }\n        e[j] = a.get(k, j);\n      }\n\n      if (wantu && k < nct) {\n        for (let i = k; i < m; i++) {\n          U.set(i, k, a.get(i, k));\n        }\n      }\n\n      if (k < nrt) {\n        e[k] = 0;\n        for (let i = k + 1; i < n; i++) {\n          e[k] = hypotenuse(e[k], e[i]);\n        }\n        if (e[k] !== 0) {\n          if (e[k + 1] < 0) {\n            e[k] = 0 - e[k];\n          }\n          for (let i = k + 1; i < n; i++) {\n            e[i] /= e[k];\n          }\n          e[k + 1] += 1;\n        }\n        e[k] = -e[k];\n        if (k + 1 < m && e[k] !== 0) {\n          for (let i = k + 1; i < m; i++) {\n            work[i] = 0;\n          }\n          for (let i = k + 1; i < m; i++) {\n            for (let j = k + 1; j < n; j++) {\n              work[i] += e[j] * a.get(i, j);\n            }\n          }\n          for (let j = k + 1; j < n; j++) {\n            let t = -e[j] / e[k + 1];\n            for (let i = k + 1; i < m; i++) {\n              a.set(i, j, a.get(i, j) + t * work[i]);\n            }\n          }\n        }\n        if (wantv) {\n          for (let i = k + 1; i < n; i++) {\n            V.set(i, k, e[i]);\n          }\n        }\n      }\n    }\n\n    let p = Math.min(n, m + 1);\n    if (nct < n) {\n      s[nct] = a.get(nct, nct);\n    }\n    if (m < p) {\n      s[p - 1] = 0;\n    }\n    if (nrt + 1 < p) {\n      e[nrt] = a.get(nrt, p - 1);\n    }\n    e[p - 1] = 0;\n\n    if (wantu) {\n      for (let j = nct; j < nu; j++) {\n        for (let i = 0; i < m; i++) {\n          U.set(i, j, 0);\n        }\n        U.set(j, j, 1);\n      }\n      for (let k = nct - 1; k >= 0; k--) {\n        if (s[k] !== 0) {\n          for (let j = k + 1; j < nu; j++) {\n            let t = 0;\n            for (let i = k; i < m; i++) {\n              t += U.get(i, k) * U.get(i, j);\n            }\n            t = -t / U.get(k, k);\n            for (let i = k; i < m; i++) {\n              U.set(i, j, U.get(i, j) + t * U.get(i, k));\n            }\n          }\n          for (let i = k; i < m; i++) {\n            U.set(i, k, -U.get(i, k));\n          }\n          U.set(k, k, 1 + U.get(k, k));\n          for (let i = 0; i < k - 1; i++) {\n            U.set(i, k, 0);\n          }\n        } else {\n          for (let i = 0; i < m; i++) {\n            U.set(i, k, 0);\n          }\n          U.set(k, k, 1);\n        }\n      }\n    }\n\n    if (wantv) {\n      for (let k = n - 1; k >= 0; k--) {\n        if (k < nrt && e[k] !== 0) {\n          for (let j = k + 1; j < n; j++) {\n            let t = 0;\n            for (let i = k + 1; i < n; i++) {\n              t += V.get(i, k) * V.get(i, j);\n            }\n            t = -t / V.get(k + 1, k);\n            for (let i = k + 1; i < n; i++) {\n              V.set(i, j, V.get(i, j) + t * V.get(i, k));\n            }\n          }\n        }\n        for (let i = 0; i < n; i++) {\n          V.set(i, k, 0);\n        }\n        V.set(k, k, 1);\n      }\n    }\n\n    let pp = p - 1;\n    let iter = 0;\n    let eps = Number.EPSILON;\n    while (p > 0) {\n      let k, kase;\n      for (k = p - 2; k >= -1; k--) {\n        if (k === -1) {\n          break;\n        }\n        const alpha =\n          Number.MIN_VALUE + eps * Math.abs(s[k] + Math.abs(s[k + 1]));\n        if (Math.abs(e[k]) <= alpha || Number.isNaN(e[k])) {\n          e[k] = 0;\n          break;\n        }\n      }\n      if (k === p - 2) {\n        kase = 4;\n      } else {\n        let ks;\n        for (ks = p - 1; ks >= k; ks--) {\n          if (ks === k) {\n            break;\n          }\n          let t =\n            (ks !== p ? Math.abs(e[ks]) : 0) +\n            (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\n          if (Math.abs(s[ks]) <= eps * t) {\n            s[ks] = 0;\n            break;\n          }\n        }\n        if (ks === k) {\n          kase = 3;\n        } else if (ks === p - 1) {\n          kase = 1;\n        } else {\n          kase = 2;\n          k = ks;\n        }\n      }\n\n      k++;\n\n      switch (kase) {\n        case 1: {\n          let f = e[p - 2];\n          e[p - 2] = 0;\n          for (let j = p - 2; j >= k; j--) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            if (j !== k) {\n              f = -sn * e[j - 1];\n              e[j - 1] = cs * e[j - 1];\n            }\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, p - 1);\n                V.set(i, p - 1, -sn * V.get(i, j) + cs * V.get(i, p - 1));\n                V.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 2: {\n          let f = e[k - 1];\n          e[k - 1] = 0;\n          for (let j = k; j < p; j++) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            f = -sn * e[j];\n            e[j] = cs * e[j];\n            if (wantu) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, k - 1);\n                U.set(i, k - 1, -sn * U.get(i, j) + cs * U.get(i, k - 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 3: {\n          const scale = Math.max(\n            Math.abs(s[p - 1]),\n            Math.abs(s[p - 2]),\n            Math.abs(e[p - 2]),\n            Math.abs(s[k]),\n            Math.abs(e[k]),\n          );\n          const sp = s[p - 1] / scale;\n          const spm1 = s[p - 2] / scale;\n          const epm1 = e[p - 2] / scale;\n          const sk = s[k] / scale;\n          const ek = e[k] / scale;\n          const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\n          const c = sp * epm1 * (sp * epm1);\n          let shift = 0;\n          if (b !== 0 || c !== 0) {\n            if (b < 0) {\n              shift = 0 - Math.sqrt(b * b + c);\n            } else {\n              shift = Math.sqrt(b * b + c);\n            }\n            shift = c / (b + shift);\n          }\n          let f = (sk + sp) * (sk - sp) + shift;\n          let g = sk * ek;\n          for (let j = k; j < p - 1; j++) {\n            let t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            let cs = f / t;\n            let sn = g / t;\n            if (j !== k) {\n              e[j - 1] = t;\n            }\n            f = cs * s[j] + sn * e[j];\n            e[j] = cs * e[j] - sn * s[j];\n            g = sn * s[j + 1];\n            s[j + 1] = cs * s[j + 1];\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, j + 1);\n                V.set(i, j + 1, -sn * V.get(i, j) + cs * V.get(i, j + 1));\n                V.set(i, j, t);\n              }\n            }\n            t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            cs = f / t;\n            sn = g / t;\n            s[j] = t;\n            f = cs * e[j] + sn * s[j + 1];\n            s[j + 1] = -sn * e[j] + cs * s[j + 1];\n            g = sn * e[j + 1];\n            e[j + 1] = cs * e[j + 1];\n            if (wantu && j < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, j + 1);\n                U.set(i, j + 1, -sn * U.get(i, j) + cs * U.get(i, j + 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          e[p - 2] = f;\n          iter = iter + 1;\n          break;\n        }\n        case 4: {\n          if (s[k] <= 0) {\n            s[k] = s[k] < 0 ? -s[k] : 0;\n            if (wantv) {\n              for (let i = 0; i <= pp; i++) {\n                V.set(i, k, -V.get(i, k));\n              }\n            }\n          }\n          while (k < pp) {\n            if (s[k] >= s[k + 1]) {\n              break;\n            }\n            let t = s[k];\n            s[k] = s[k + 1];\n            s[k + 1] = t;\n            if (wantv && k < n - 1) {\n              for (let i = 0; i < n; i++) {\n                t = V.get(i, k + 1);\n                V.set(i, k + 1, V.get(i, k));\n                V.set(i, k, t);\n              }\n            }\n            if (wantu && k < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = U.get(i, k + 1);\n                U.set(i, k + 1, U.get(i, k));\n                U.set(i, k, t);\n              }\n            }\n            k++;\n          }\n          iter = 0;\n          p--;\n          break;\n        }\n        // no default\n      }\n    }\n\n    if (swapped) {\n      let tmp = V;\n      V = U;\n      U = tmp;\n    }\n\n    this.m = m;\n    this.n = n;\n    this.s = s;\n    this.U = U;\n    this.V = V;\n  }\n\n  solve(value) {\n    let Y = value;\n    let e = this.threshold;\n    let scols = this.s.length;\n    let Ls = Matrix.zeros(scols, scols);\n\n    for (let i = 0; i < scols; i++) {\n      if (Math.abs(this.s[i]) <= e) {\n        Ls.set(i, i, 0);\n      } else {\n        Ls.set(i, i, 1 / this.s[i]);\n      }\n    }\n\n    let U = this.U;\n    let V = this.rightSingularVectors;\n\n    let VL = V.mmul(Ls);\n    let vrows = V.rows;\n    let urows = U.rows;\n    let VLU = Matrix.zeros(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < scols; k++) {\n          sum += VL.get(i, k) * U.get(j, k);\n        }\n        VLU.set(i, j, sum);\n      }\n    }\n\n    return VLU.mmul(Y);\n  }\n\n  solveForDiagonal(value) {\n    return this.solve(Matrix.diag(value));\n  }\n\n  inverse() {\n    let V = this.V;\n    let e = this.threshold;\n    let vrows = V.rows;\n    let vcols = V.columns;\n    let X = new Matrix(vrows, this.s.length);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < vcols; j++) {\n        if (Math.abs(this.s[j]) > e) {\n          X.set(i, j, V.get(i, j) / this.s[j]);\n        }\n      }\n    }\n\n    let U = this.U;\n\n    let urows = U.rows;\n    let ucols = U.columns;\n    let Y = new Matrix(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < ucols; k++) {\n          sum += X.get(i, k) * U.get(j, k);\n        }\n        Y.set(i, j, sum);\n      }\n    }\n\n    return Y;\n  }\n\n  get condition() {\n    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\n  }\n\n  get norm2() {\n    return this.s[0];\n  }\n\n  get rank() {\n    let tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\n    let r = 0;\n    let s = this.s;\n    for (let i = 0, ii = s.length; i < ii; i++) {\n      if (s[i] > tol) {\n        r++;\n      }\n    }\n    return r;\n  }\n\n  get diagonal() {\n    return Array.from(this.s);\n  }\n\n  get threshold() {\n    return (Number.EPSILON / 2) * Math.max(this.m, this.n) * this.s[0];\n  }\n\n  get leftSingularVectors() {\n    return this.U;\n  }\n\n  get rightSingularVectors() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    return Matrix.diag(this.s);\n  }\n}\n","import LuDecomposition from './dc/lu';\nimport QrDecomposition from './dc/qr';\nimport SingularValueDecomposition from './dc/svd';\nimport Matrix from './matrix';\nimport WrapperMatrix2D from './wrap/WrapperMatrix2D';\n\nexport function inverse(matrix, useSVD = false) {\n  matrix = WrapperMatrix2D.checkMatrix(matrix);\n  if (useSVD) {\n    return new SingularValueDecomposition(matrix).inverse();\n  } else {\n    return solve(matrix, Matrix.eye(matrix.rows));\n  }\n}\n\nexport function solve(leftHandSide, rightHandSide, useSVD = false) {\n  leftHandSide = WrapperMatrix2D.checkMatrix(leftHandSide);\n  rightHandSide = WrapperMatrix2D.checkMatrix(rightHandSide);\n  if (useSVD) {\n    return new SingularValueDecomposition(leftHandSide).solve(rightHandSide);\n  } else {\n    return leftHandSide.isSquare()\n      ? new LuDecomposition(leftHandSide).solve(rightHandSide)\n      : new QrDecomposition(leftHandSide).solve(rightHandSide);\n  }\n}\n","import { Matrix, MatrixTransposeView, solve } from 'ml-matrix';\nimport BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision,\n} from 'ml-regression-base';\n\nexport default class PolynomialRegression extends BaseRegression {\n  constructor(x, y, degree) {\n    super();\n    if (x === true) {\n      this.degree = y.degree;\n      this.powers = y.powers;\n      this.coefficients = y.coefficients;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y, degree);\n    }\n  }\n\n  _predict(x) {\n    let y = 0;\n    for (let k = 0; k < this.powers.length; k++) {\n      y += this.coefficients[k] * Math.pow(x, this.powers[k]);\n    }\n    return y;\n  }\n\n  toJSON() {\n    return {\n      name: 'polynomialRegression',\n      degree: this.degree,\n      powers: this.powers,\n      coefficients: this.coefficients,\n    };\n  }\n\n  toString(precision) {\n    return this._toFormula(precision, false);\n  }\n\n  toLaTeX(precision) {\n    return this._toFormula(precision, true);\n  }\n\n  _toFormula(precision, isLaTeX) {\n    let sup = '^';\n    let closeSup = '';\n    let times = ' * ';\n    if (isLaTeX) {\n      sup = '^{';\n      closeSup = '}';\n      times = '';\n    }\n\n    let fn = '';\n    let str = '';\n    for (let k = 0; k < this.coefficients.length; k++) {\n      str = '';\n      if (this.coefficients[k] !== 0) {\n        if (this.powers[k] === 0) {\n          str = maybeToPrecision(this.coefficients[k], precision);\n        } else {\n          if (this.powers[k] === 1) {\n            str = `${maybeToPrecision(this.coefficients[k], precision) +\n              times}x`;\n          } else {\n            str = `${maybeToPrecision(this.coefficients[k], precision) +\n              times}x${sup}${this.powers[k]}${closeSup}`;\n          }\n        }\n\n        if (this.coefficients[k] > 0 && k !== this.coefficients.length - 1) {\n          str = ` + ${str}`;\n        } else if (k !== this.coefficients.length - 1) {\n          str = ` ${str}`;\n        }\n      }\n      fn = str + fn;\n    }\n    if (fn.charAt(0) === '+') {\n      fn = fn.slice(1);\n    }\n\n    return `f(x) = ${fn}`;\n  }\n\n  static load(json) {\n    if (json.name !== 'polynomialRegression') {\n      throw new TypeError('not a polynomial regression model');\n    }\n    return new PolynomialRegression(true, json);\n  }\n}\n\nfunction regress(pr, x, y, degree) {\n  const n = x.length;\n  let powers;\n  if (Array.isArray(degree)) {\n    powers = degree;\n    degree = powers.length;\n  } else {\n    degree++;\n    powers = new Array(degree);\n    for (let k = 0; k < degree; k++) {\n      powers[k] = k;\n    }\n  }\n  const F = new Matrix(n, degree);\n  const Y = new Matrix([y]);\n  for (let k = 0; k < degree; k++) {\n    for (let i = 0; i < n; i++) {\n      if (powers[k] === 0) {\n        F.set(i, k, 1);\n      } else {\n        F.set(i, k, Math.pow(x[i], powers[k]));\n      }\n    }\n  }\n\n  const FT = new MatrixTransposeView(F);\n  const A = FT.mmul(F);\n  const B = FT.mmul(new MatrixTransposeView(Y));\n\n  pr.degree = degree - 1;\n  pr.powers = powers;\n  pr.coefficients = solve(A, B).to1DArray();\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\n\nexport default class PowerRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      // reloading model\n      this.A = y.A;\n      this.B = y.B;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  _predict(newInputs) {\n    return this.A * Math.pow(newInputs, this.B);\n  }\n\n  toJSON() {\n    return {\n      name: 'powerRegression',\n      A: this.A,\n      B: this.B\n    };\n  }\n\n  toString(precision) {\n    return `f(x) = ${maybeToPrecision(\n      this.A,\n      precision\n    )} * x^${maybeToPrecision(this.B, precision)}`;\n  }\n\n  toLaTeX(precision) {\n    let latex = '';\n    if (this.B >= 0) {\n      latex = `f(x) = ${maybeToPrecision(\n        this.A,\n        precision\n      )}x^{${maybeToPrecision(this.B, precision)}}`;\n    } else {\n      latex = `f(x) = \\\\frac{${maybeToPrecision(\n        this.A,\n        precision\n      )}}{x^{${maybeToPrecision(-this.B, precision)}}}`;\n    }\n    latex = latex.replace(/e([+-]?[0-9]+)/g, 'e^{$1}');\n    return latex;\n  }\n\n  static load(json) {\n    if (json.name !== 'powerRegression') {\n      throw new TypeError('not a power regression model');\n    }\n    return new PowerRegression(true, json);\n  }\n}\n\nfunction regress(pr, x, y) {\n  const n = x.length;\n  const xl = new Array(n);\n  const yl = new Array(n);\n  for (let i = 0; i < n; i++) {\n    xl[i] = Math.log(x[i]);\n    yl[i] = Math.log(y[i]);\n  }\n\n  const linear = new SimpleLinearRegression(xl, yl);\n  pr.A = Math.exp(linear.intercept);\n  pr.B = linear.slope;\n}\n","import isArray from 'is-any-array';\nimport quickSelectMedian from 'median-quickselect';\n\nfunction median(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  return quickSelectMedian(input.slice());\n}\n\nexport default median;\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport median from 'ml-array-median';\n\nexport default class TheilSenRegression extends BaseRegression {\n  /**\n   * Theil–Sen estimator\n   * https://en.wikipedia.org/wiki/Theil%E2%80%93Sen_estimator\n   * @param {Array<number>|boolean} x\n   * @param {Array<number>|object} y\n   * @constructor\n   */\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      // loads the model\n      this.slope = y.slope;\n      this.intercept = y.intercept;\n      this.coefficients = y.coefficients;\n    } else {\n      // creates the model\n      checkArrayLength(x, y);\n      theilSen(this, x, y);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'TheilSenRegression',\n      slope: this.slope,\n      intercept: this.intercept\n    };\n  }\n\n  _predict(input) {\n    return this.slope * input + this.intercept;\n  }\n\n  computeX(input) {\n    return (input - this.intercept) / this.slope;\n  }\n\n  toString(precision) {\n    var result = 'f(x) = ';\n    if (this.slope) {\n      var xFactor = maybeToPrecision(this.slope, precision);\n      result += `${Math.abs(xFactor - 1) < 1e-5 ? '' : `${xFactor} * `}x`;\n      if (this.intercept) {\n        var absIntercept = Math.abs(this.intercept);\n        var operator = absIntercept === this.intercept ? '+' : '-';\n        result +=\n          ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\n      }\n    } else {\n      result += maybeToPrecision(this.intercept, precision);\n    }\n    return result;\n  }\n\n  toLaTeX(precision) {\n    return this.toString(precision);\n  }\n\n  static load(json) {\n    if (json.name !== 'TheilSenRegression') {\n      throw new TypeError('not a Theil-Sen model');\n    }\n    return new TheilSenRegression(true, json);\n  }\n}\n\nfunction theilSen(regression, x, y) {\n  let len = x.length;\n  let slopes = new Array(len * len);\n  let count = 0;\n  for (let i = 0; i < len; ++i) {\n    for (let j = i + 1; j < len; ++j) {\n      if (x[i] !== x[j]) {\n        slopes[count++] = (y[j] - y[i]) / (x[j] - x[i]);\n      }\n    }\n  }\n  slopes.length = count;\n  let medianSlope = median(slopes);\n\n  let cuts = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    cuts[i] = y[i] - medianSlope * x[i];\n  }\n\n  regression.slope = medianSlope;\n  regression.intercept = median(cuts);\n  regression.coefficients = [regression.intercept, regression.slope];\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class ColData {\n  constructor(\n    public name: string,\n    public displayName: string,\n    public type: string,\n    public values: (number | string | null)[],\n  ) {\n  }\n}\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class FieldSet {\n  constructor(\n    public col: number,\n    public sizeCol: number,\n    public color: string,\n    public dotSize: number,\n    public lineSize: number,\n    public lineType: string,\n    public polynomialOrder: number,\n    public hidden: boolean,\n    public colorCol: number,\n  ) {\n  }\n}\n","import React from 'react';\nimport { PanelProps } from '@grafana/data';\nimport $ from 'jquery';\nimport * as d3 from 'd3';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\nimport ExponentialRegression from 'ml-regression-exponential';\nimport PolynomialRegression from 'ml-regression-polynomial';\nimport PowerRegression from 'ml-regression-power';\nimport TheilSenRegression from 'ml-regression-theil-sen';\nimport { ScatterOptions } from 'types/ScatterOptions';\nimport { ColData } from 'types/ColData';\nimport { MarginPair } from 'types/MarginPair';\nimport { XAxis } from 'types/XAxis';\nimport { FieldSet } from 'types/FieldSet';\nimport { Title } from 'types/Title';\nimport './ScatterPanel.css';\n\nconst randomColor = require('randomcolor');\n\ninterface Props extends PanelProps<ScatterOptions> { }\n\nfunction autoConfigure(options: ScatterOptions, colData: ColData[]) {\n  if (options.xAxis.col === -1 || options.xAxis.col >= colData.length) {\n    options.xAxis = new XAxis(0, false);\n  }\n\n  if (options.xAxisTitle.text.length === 0) {\n    options.xAxisTitle = new Title(colData[0].displayName, 'white', 2, false, false, 4, 'white');\n  }\n\n  options.fieldSets = options.fieldSets.filter((f) => f.col >= 0 && f.col < colData.length && f.col !== options.xAxis.col);\n\n  if (options.fieldSets.length === 0) {\n    const fieldSets = colData.map((f, i) => new FieldSet(i, -1, randomColor(), 2, 1, 'none', 3, false, -1));\n\n    options.fieldSets = fieldSets.filter((c) => c.col !== options.xAxis.col && colData[c.col].type !== 'string');\n  }\n\n  options.xMargins.lower = 30;\n  options.xMargins.upper = 10;\n  options.yMargins.lower = 20;\n  options.yMargins.upper = 20;\n}\n\nfunction drawReferenceLines(\n  options: ScatterOptions,\n  xScale: Function,\n  yScale: Function,\n  xExtent: number[],\n  yExtent: number[],\n) {\n  const ReferenceLinesContent = new Array(0);// as JSX.Element[];\n\n  options.ReferenceLines.forEach((ReferenceLine, index) => {\n    if (ReferenceLine.vertical) {\n      if (ReferenceLine.value < xExtent[0] || ReferenceLine.value > xExtent[1]) {\n        return;\n      }\n\n      const xValue = xScale(ReferenceLine.value);\n\n      const label = ReferenceLine.label.length > 0 ?\n        (\n          <text\n            key={`ReferenceLinelabel-[${index}]`}\n            className=\"scatter-ReferenceLinelabel\"\n            x={xValue}\n            y={yScale(yExtent[1]) - 5}\n            alignmentBaseline=\"baseline\"\n            textAnchor=\"middle\"\n            fill={ReferenceLine.lineColor}\n            fontSize={options.label.textSize * 6}\n            fontWeight=\"100\"\n          >\n            {ReferenceLine.label}\n          </text>\n        ) : null;\n\n      ReferenceLinesContent.push(\n        <g>\n          <line\n            key={`ReferenceLine-[${index}]`}\n            className=\"scatter-ReferenceLineline\"\n            x1={xValue}\n            x2={xValue}\n            y1={yScale(yExtent[0])}\n            y2={yScale(yExtent[1])}\n            stroke={ReferenceLine.lineColor}\n            strokeWidth={ReferenceLine.lineSize}\n            fill=\"none\"\n          />\n          {label}\n        </g>,\n      );\n    } else {\n      const yValue = yScale(ReferenceLine.value);\n      const height = yScale(yExtent[0]) - yValue;\n\n      if (height < 0 || height > yScale(yExtent[0]) - yScale(yExtent[1])) {\n        return;\n      }\n\n      const label = ReferenceLine.label.length > 0 ?\n        (\n          <text\n            key={`ReferenceLinelabel-[${index}]`}\n            className=\"scatter-ReferenceLinelabel\"\n            x={xScale(xExtent[1]) + 5}\n            y={yValue}\n            alignmentBaseline=\"middle\"\n            textAnchor=\"left\"\n            fill={ReferenceLine.lineColor}\n            fontSize={options.label.textSize * 6}\n            fontWeight=\"100\"\n          >\n            {ReferenceLine.label}\n          </text>\n        ) : null;\n\n      ReferenceLinesContent.push(\n        <g>\n          <line\n            key={`ReferenceLine-[${index}]`}\n            className=\"scatter-ReferenceLineline\"\n            x1={xScale(xExtent[0])}\n            x2={xScale(xExtent[1])}\n            y1={yValue}\n            y2={yValue}\n            stroke={ReferenceLine.lineColor}\n            strokeWidth={ReferenceLine.lineSize}\n            fill=\"none\"\n          />\n          {label}\n        </g>,\n      );\n    }\n  });\n  return ReferenceLinesContent;\n}\n\nfunction drawLines(\n  options: ScatterOptions,\n  fieldSets: FieldSet[],\n  xValues: number[],\n  yValues: number[][],\n  xScale: Function,\n  yScale: Function,\n  xExtent: number[],\n  yExtent: number[],\n) {\n  const lines = new Array(0);// as JSX.Element[];\n\n  fieldSets.forEach((fieldSet, index) => {\n    if (fieldSet.lineType !== 'none' && fieldSet.lineSize > 0) {\n      let path = '';\n\n      let xyData = xValues.map((d, i) => [d, yValues[index][i]]).filter((xy) => xy[1] != null);\n      if (fieldSet.lineType === 'simple') {\n        path = `\n        ${xyData.map((xy, i) => `${i === 0 ? 'M' : 'L'} ${xScale(xy[0])} ${yScale(xy[1])}`).join(' ')}\n      `;\n      } else if (fieldSet.lineType === 'linear') {\n        const x = xyData.map((xy) => xy[0]);\n        const y = xyData.map((xy) => xy[1]);\n\n        const SLR = new SimpleLinearRegression(x, y);\n        // check for start and end points inside the plotted area\n        let x0 = xExtent[0];\n        let y0 = SLR.predict(x0);\n        if (y0 < yExtent[0]) {\n          y0 = yExtent[0];\n          x0 = SLR.computeX(y0);\n        }\n        if (y0 > yExtent[1]) {\n          y0 = yExtent[1];\n          x0 = SLR.computeX(y0);\n        }\n\n        let x1 = xExtent[1];\n        let y1 = SLR.predict(x1);\n        if (y1 < yExtent[0]) {\n          y1 = yExtent[0];\n          x1 = SLR.computeX(y1);\n        }\n        if (y1 > yExtent[1]) {\n          y1 = yExtent[1];\n          x1 = SLR.computeX(y1);\n        }\n\n        path = `M ${xScale(x0)} ${yScale(y0)} L ${xScale(x1)} ${yScale(y1)}`;\n      } else if (fieldSet.lineType === 'exponential') {\n        const ex = xyData.map((xy) => xy[0]);\n        const ey = xyData.map((xy) => xy[1]);\n        const ER = new ExponentialRegression(ex, ey);\n\n        const x0 = xExtent[0];\n        const x1 = xExtent[1];\n\n        const steps = 100;\n        const dx = (x1 - x0) / (steps - 1);\n        const xys = new Array(0);\n        for (let i = 0; i < steps; i++) {\n          const x = x0 + i * dx;\n          const y = ER.predict(x);\n          xys.push([x, y]);\n        }\n        path = `\n        ${xys.map((d, i) => `${i === 0 ? 'M' : 'L'} ${xScale(d[0])} ${yScale(d[1])}`).join(' ')}\n      `;\n      } else if (fieldSet.lineType === 'power') {\n        xyData = xyData.filter((d) => d[0] > 0);\n        const px = xyData.map((xy) => xy[0]);\n        const py = xyData.map((xy) => xy[1]);\n        const PR = new PowerRegression(px, py);\n\n        const x0 = xExtent[0];\n        const x1 = xExtent[1];\n\n        const steps = 100;\n        const dx = (x1 - x0) / (steps - 1);\n        const xys = new Array(0);\n        for (let i = 0; i < steps; i++) {\n          const x = x0 + i * dx;\n          const y = PR.predict(x);\n          xys.push([x, y]);\n        }\n        path = `\n      ${xys.map((d, i) => `${i === 0 ? 'M' : 'L'} ${xScale(d[0])} ${yScale(d[1])}`).join(' ')}\n      `;\n      } else if (fieldSet.lineType === 'polynomial') {\n        xyData = xyData.filter((d) => d[0] > 0);\n        const pnx = xyData.map((xy) => xy[0]);\n        const pny = xyData.map((xy) => xy[1]);\n        const PN = new PolynomialRegression(pnx, pny, fieldSet.polynomialOrder ?? 3);\n\n        const x0 = xExtent[0];\n        const x1 = xExtent[1];\n\n        const steps = 100;\n        const dx = (x1 - x0) / (steps - 1);\n        const xys = new Array(0);\n        for (let i = 0; i < steps; i++) {\n          const x = x0 + i * dx;\n          const y = PN.predict(x);\n          xys.push([x, y]);\n        }\n        path = `\n    ${xys.map((d, i) => `${i === 0 ? 'M' : 'L'} ${xScale(d[0])} ${yScale(d[1])}`).join(' ')}\n    `;\n      } else if (fieldSet.lineType === 'theilsen') {\n        xyData = xyData.filter((d) => d[0] > 0);\n        const tx = xyData.map((xy) => xy[0]);\n        const ty = xyData.map((xy) => xy[1]);\n        const TS = new TheilSenRegression(tx, ty);\n\n        const x0 = xExtent[0];\n        const x1 = xExtent[1];\n\n        const steps = 100;\n        const dx = (x1 - x0) / (steps - 1);\n        const xys = new Array(0);\n        for (let i = 0; i < steps; i++) {\n          const x = x0 + i * dx;\n          const y = TS.predict(x);\n          xys.push([x, y]);\n        }\n        path = `\n      ${xys.map((d, i) => `${i === 0 ? 'M' : 'L'} ${xScale(d[0])} ${yScale(d[1])}`).join(' ')}\n      `;\n      }\n\n      if (path.length) {\n        let className = `ScatterLine ScatterLine-${index}`;\n        if (options.legend.size && fieldSet.hidden) {\n          className += ' ScatterLineHidden';\n        }\n\n        lines.push(\n          <path\n            key={`line-[${index}]`}\n            className={className}\n            d={path}\n            stroke={fieldSet.color}\n            strokeWidth={fieldSet.lineSize}\n            fill=\"none\"\n          />,\n        );\n      }\n    }\n  });\n\n  return lines;\n}\n\nfunction drawDots(options: ScatterOptions,\n  fieldSets: FieldSet[],\n  xValues: number[],\n  yValues: number[][],\n  colValues: number[][],\n  xScale: Function,\n  yScale: Function) {\n  return fieldSets.map((y, i: number) => (\n    xValues.map((x, j) => {\n      const dotSize = y.sizeCol >= 0 ? colValues[y.sizeCol][j] : -y.sizeCol;\n      const dotColor = y.colorCol >= 0 ? colValues[y.colorCol][j] : y.color;\n\n      const yValue = yValues[i][j];\n\n      if (dotSize > 0 && yValue != null) {\n        let className = `ScatterSet-${i}`;\n        if (options.legend.size && y.hidden) {\n          className += ' ScatterSetHidden';\n        }\n\n        return (\n          <circle\n            key={`circle-[${y}][${i}]`}\n            cx={xScale(x)}\n            cy={yScale(yValue)}\n            r={dotSize}\n            className={className}\n            fill={dotColor.toString()}\n          />\n        );\n      }\n      return <div key={`circle-[${y}][${i}]`} />;\n    })\n  ));\n}\n\nfunction drawLabels(options: ScatterOptions,\n  labels: string[],\n  xValues: number[],\n  xScale: Function) {\n  return xValues.map((x, i: number) => {\n    if (Array.isArray(labels) && i < labels.length) {\n      return (\n        <text\n          key={`label-[${i}]`}\n          x={xScale(x)}\n          alignmentBaseline=\"hanging\"\n          textAnchor=\"middle\"\n          fill={options.label.color}\n          fontSize={options.label.textSize * 4}\n          fontWeight=\"100\"\n        >\n          {labels[i]}\n        </text>\n      );\n    }\n    return null;\n  });\n}\n\nfunction applySetFieldSetHidden(\n  fieldSet: FieldSet,\n  index: number,\n  hidden: boolean,\n  panelId: number,\n) {\n  fieldSet.hidden = hidden;\n\n  const panelGroup = $(`.ScatterPanel-${panelId}`);\n  const markers = $(`.ScatterSet-${index}`, panelGroup);\n  if (hidden) { markers.addClass('ScatterSetHidden'); } else { markers.removeClass('ScatterSetHidden'); }\n\n  const lines = $(`.ScatterLine-${index}`, panelGroup);\n  if (hidden) { lines.addClass('ScatterLineHidden'); } else { lines.removeClass('ScatterLineHidden'); }\n}\n\nfunction onLegendClick(e: React.MouseEvent, index: number, fieldSets: FieldSet[], panelId: number) {\n  const thisLegendTextElement = $(e.currentTarget);\n  const legendGroup = thisLegendTextElement.parent();\n  const legendTextElements = $('.ScatterLegendText', legendGroup);\n\n  const hiddenLegendTextElements = legendTextElements.filter('.ScatterLegendTextHidden');\n\n  if (e.ctrlKey) {\n    // toggle the state of the current item\n    thisLegendTextElement.toggleClass('ScatterLegendTextHidden');\n    applySetFieldSetHidden(fieldSets[index], index, !fieldSets[index].hidden, panelId);\n  } else if (hiddenLegendTextElements.length === 0) {\n    // if none are hidden, hide everything else\n    legendTextElements.addClass('ScatterLegendTextHidden');\n    thisLegendTextElement.toggleClass('ScatterLegendTextHidden');\n    fieldSets.forEach((f, i) => { applySetFieldSetHidden(f, i, index !== i, panelId); });\n  } else if (!thisLegendTextElement.hasClass('ScatterLegendTextHidden')) {\n    // if this item is visible, unhide everything\n    legendTextElements.removeClass('ScatterLegendTextHidden');\n    fieldSets.forEach((f, i) => { applySetFieldSetHidden(f, i, false, panelId); });\n  } else {\n    // hide everything but this one\n    legendTextElements.addClass('ScatterLegendTextHidden');\n    thisLegendTextElement.toggleClass('ScatterLegendTextHidden');\n    fieldSets.forEach((f, i) => { applySetFieldSetHidden(f, i, index !== i, panelId); });\n  }\n}\n\nfunction drawLegend(options: ScatterOptions, width: number, height: number, xMargins: MarginPair, yMargins: MarginPair, colNames: string[], panelId: number) {\n  // figure the rightMarginOffset, starting with the space needed for the longest reference line text\n  let rightMarginOffset = options.ReferenceLines.length > 0 ? d3.max(options.ReferenceLines.map((r) => (r.vertical ? 0 : r.label.length))) as number * 8.0 : 0.0;\n\n  if (options.legend.size) {\n    const scale = options.legend.size / 3;\n\n    const fieldSets = options.fieldSets.filter((x: FieldSet) => x.col >= 0 && x.col < colNames.length);\n\n    const maxLength = d3.max(fieldSets.map((f) => colNames[f.col].length)) as number;\n\n    if (fieldSets.length > 0) {\n      const offset = 20;\n      const dx = offset + (8.6 * scale * maxLength);\n      if (rightMarginOffset < dx) {\n        rightMarginOffset = dx;\n      }\n      xMargins.upper += rightMarginOffset;\n\n      const legends = new Array(0);\n\n      fieldSets.forEach((f, i) => {\n        const className = f.hidden ? 'ScatterLegendText ScatterLegendTextHidden' : 'ScatterLegendText';\n        legends.push(\n          <text\n            transform={`translate(${offset}, ${30 * scale * i}) scale(${scale})`}\n            className={className}\n            alignmentBaseline=\"hanging\"\n            textAnchor=\"left\"\n            fill={f.color}\n            onClick={(e) => {\n              onLegendClick(e, i, fieldSets, panelId);\n            }}\n          >\n            {colNames[f.col]}\n          </text>,\n        );\n      });\n\n      return (\n        <g id=\"legend\" transform={`translate(${width - dx}, ${yMargins.upper})`}>\n          {legends}\n        </g>\n      );\n    }\n  }\n\n  xMargins.upper += rightMarginOffset;\n  return null;\n}\n\nfunction drawXTitle(options: ScatterOptions, width: number, height: number, xMargins: MarginPair) {\n  const title = options.xAxisTitle;\n  if (title.text) {\n    if (options.xAxisTitle.rotated) {\n      return (\n        <g\n          id=\"XTitle\"\n          transform={`translate(${(width + xMargins.lower - xMargins.upper) / 2.0}, ${height})  rotate(-90) scale(${title.textSize})`}\n        >\n          <text\n            className=\"ScatterXTitleRect\"\n            alignmentBaseline=\"middle\"\n            textAnchor=\"left\"\n            fill={title.color}\n          >\n            {title.text}\n          </text>\n        </g>\n      );\n    }\n\n    return (\n      <g\n        id=\"XTitle\"\n        transform={`translate(${(width + xMargins.lower - xMargins.upper) / 2.0}, ${height}) scale(${title.textSize})`}\n      >\n        <text\n          className=\"ScatterXTitleRect\"\n          alignmentBaseline=\"text-after-edge\"\n          textAnchor=\"middle\"\n          fill={title.color}\n        >\n          {title.text}\n        </text>\n      </g>\n    );\n  }\n\n  return null;\n}\n\nfunction drawYTitle(options: ScatterOptions, width: number, height: number, yMargins: MarginPair) {\n  const title = options.yAxisTitle;\n  if (title.text) {\n    if (options.yAxisTitle.rotated) {\n      return (\n        <g\n          id=\"YTitle\"\n          transform={`translate(0, ${(height + yMargins.upper - yMargins.lower) / 2.0}) rotate(-90) scale(${title.textSize})`}\n        >\n          <text\n            className=\"ScatterYTitleRect\"\n            alignmentBaseline=\"hanging\"\n            textAnchor=\"middle\"\n            fill={title.color}\n          >\n            {title.text}\n          </text>\n        </g>\n      );\n    }\n\n    return (\n      <g\n        id=\"YTitle\"\n        transform={`translate(0, ${(height + yMargins.upper - yMargins.lower) / 2.0}) scale(${title.textSize})`}\n      >\n        <text\n          className=\"ScatterYTitleRect\"\n          alignmentBaseline=\"middle\"\n          textAnchor=\"left\"\n          fill={title.color}\n        >\n          {title.text}\n        </text>\n      </g>\n    );\n  }\n\n  return null;\n}\n\nfunction isXAxisLabelValid(\n  options: ScatterOptions,\n  colData: {\n    name: string,\n    displayName: string,\n    type: string,\n    values: any[]\n  }[],\n) {\n  return options.label.col >= 0 && colData[options.label.col].type === 'string';\n}\n\nfunction generateContent(\n  options: ScatterOptions,\n  width: number,\n  height: number,\n  fieldSets: FieldSet[],\n  colData: {\n    name: string,\n    displayName: string,\n    type: string,\n    values: any[]\n  }[],\n  panelId: number,\n) {\n  const colValues = colData.map((c) => c.values);\n  const colNames = colData.map((c) => c.displayName || c.name);\n  const xValues = colData[options.xAxis.col].type !== 'string' ? colValues[options.xAxis.col] : Array.from(colValues[0], (x, i) => i + 1);\n  const xExtent = [\n    options.xAxisExtents.min === 0 ? 0 : options.xAxisExtents.min || d3.min(xValues),\n    options.xAxisExtents.max === 0 ? 0 : options.xAxisExtents.max || d3.max(xValues),\n  ] as number[];\n\n  const yValues = fieldSets.map((f) => colValues[f.col]);\n  const yExtents = yValues.map((c) => d3.extent(c));\n  const yExtent = [\n    options.yAxisExtents.min === 0 ? 0 : options.yAxisExtents.min\n      || d3.min(yExtents.map((c) => c[0]) as number[]),\n    options.yAxisExtents.max === 0 ? 0 : options.yAxisExtents.max\n      || d3.max(yExtents.map((c) => c[1]) as number[]),\n  ] as number[];\n\n  const labels = isXAxisLabelValid(options, colData) ? colValues[options.label.col] : [];\n  const xMargins = new MarginPair(options.xMargins.lower || 0, options.xMargins.upper || 0);\n  const yMargins = new MarginPair(options.yMargins.lower || 0, options.yMargins.upper || 0);\n  const legend = drawLegend(options, width, height, xMargins, yMargins, colNames, panelId);\n\n  // offset left and bottom margins to allow room for the titles (if any)\n  if (options.xAxisTitle.text.length) {\n    yMargins.lower += options.xAxisTitle.rotated ? 8.2 * options.xAxisTitle.textSize * options.xAxisTitle.text.length : 14 * options.xAxisTitle.textSize;\n  }\n\n  if (options.yAxisTitle.text.length) {\n    xMargins.lower += !options.yAxisTitle.rotated ? 8.2 * options.yAxisTitle.textSize * options.yAxisTitle.text.length : 14 * options.yAxisTitle.textSize;\n  }\n\n  const xTitle = drawXTitle(options, width, height, xMargins);\n  const yTitle = drawYTitle(options, width, height, yMargins);\n\n  const border = options.border.size > 0 ? (\n    <rect\n      id=\"border\"\n      transform={`translate(${xMargins.lower}, ${yMargins.upper})`}\n      width={width - xMargins.lower - xMargins.upper}\n      height={height - yMargins.upper - yMargins.lower}\n      stroke={options.border.color}\n      strokeWidth={options.border.size}\n      fill=\"none\"\n    />\n  ) : null;\n\n  const clippath = (\n    <defs>\n      <clipPath id={`grid-${panelId}.${width}`}>\n        <rect\n          transform={`translate(${xMargins.lower}, ${yMargins.upper})`}\n          width={width - xMargins.lower - xMargins.upper}\n          height={height - yMargins.upper - yMargins.lower}\n        />\n      </clipPath>\n    </defs>\n  );\n\n  const xScale = (options.xAxisTitle.logScale ? d3.scaleLog() : d3.scaleLinear())\n    .nice()\n    .domain(xExtent as [number, number])\n    .range([\n      options.xAxis.inverted ? (width - xMargins.upper) : xMargins.lower,\n      options.xAxis.inverted ? xMargins.lower : (width - xMargins.upper),\n    ]);\n\n  let xAxis = d3.axisBottom(xScale);\n\n  if (labels.length > 0) xAxis = xAxis.ticks(0);\n  else xAxis = xAxis.tickSize(yMargins.upper + yMargins.lower - height);\n\n  const yScale = (options.yAxisTitle.logScale ? d3.scaleLog() : d3.scaleLinear())\n    .nice()\n    .domain(yExtent as [number, number])\n    .range([height - yMargins.lower, yMargins.upper]);\n\n  const yAxis = d3.axisLeft(yScale).tickSize(xMargins.lower + xMargins.upper - width);\n\n  return (\n    <svg\n      width={width}\n      height={height}\n    >\n      <g className={`ScatterPanel-${panelId}`}>\n        {legend}\n        {xTitle}\n        {yTitle}\n        <g\n          id=\"YGrid\"\n          transform={`translate(0, ${height - yMargins.lower})`}\n          ref={(node) => {\n            d3.select(node)\n              .call(xAxis as any)\n              .style('font-size', options.xAxisTitle.fontSize * 4)\n              .attr('color', options.xAxisTitle.fontColor)\n              .selectAll('line')\n              .attr('stroke', options.grid.color);\n          }}\n        />\n        <g\n          id=\"HGrid\"\n          transform={`translate(${xMargins.lower}, 0)`}\n          ref={(node) => {\n            d3.select(node)\n              .call(yAxis as any)\n              .style('font-size', options.yAxisTitle.fontSize * 4)\n              .attr('color', options.yAxisTitle.fontColor)\n              .selectAll('line')\n              .attr('stroke', options.grid.color);\n          }}\n        />\n        {clippath}\n        {border}\n        <g id=\"ReferenceLines\">\n          {drawReferenceLines(options, xScale, yScale, xExtent, yExtent)}\n        </g>\n        <g id=\"lines\" clipPath={`url(#grid-${panelId}.${width})`}>\n          {drawLines(options, fieldSets, xValues, yValues, xScale, yScale, xExtent, yExtent)}\n        </g>\n        <g id=\"dots\">\n          {drawDots(options, fieldSets, xValues, yValues, colValues, xScale, yScale)}\n        </g>\n        <g\n          id=\"labels\"\n          transform={`translate(0, ${height - yMargins.lower + options.label.textSize + 3})`}\n        >\n          {drawLabels(options, labels, xValues, xScale)}\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport const ScatterPanel: React.FC<Props> = ({\n  options, data, width, height,\n}) => {\n  if (data.series?.length > 0) {\n    const frame = data.series[0];\n\n    const panelId = data.request?.panelId as number;\n\n    const colData = new Array(0);\n    frame.fields.forEach((field) => {\n      colData.push(new ColData(\n        field.name,\n        field.config?.displayName || field.name,\n        field.type,\n        field.values.toArray().map((v) => v as number),\n      ));\n    });\n\n    if (colData.length < 2) {\n      return (\n        <div style={{ overflow: 'hidden', height: '100%' }}>\n          <p>To get started, create a table query that returns 2 or more numeric columns</p>\n        </div>\n      );\n    }\n\n    if (options.xAxis.col === -1 || options.fieldSets.length === 0) {\n      // Nothing has been setup - call auto-config\n      autoConfigure(options, colData);\n    }\n\n    if (options.xAxis.col >= colData.length) {\n      return (\n        <div style={{ overflow: 'hidden', height: '100%' }}>\n          <p>X Axis field setting not found in current query</p>\n        </div>\n      );\n    }\n    const fieldSets = options.fieldSets.filter((x) => x != null && x?.col >= 0 && x?.col < colData.length);\n    if (fieldSets.length === 0) {\n      return (\n        <div style={{ overflow: 'hidden', height: '100%' }}>\n          <p>No Y Axis(s) data found in current query</p>\n        </div>\n      );\n    }\n    return generateContent(options, width, height, fieldSets, colData, panelId);\n  }\n\n  return (\n    <div style={{ overflow: 'hidden', height: '100%' }}>\n      <p>No data</p>\n      <p>To get started, create a table query that returns 2 or more numeric columns</p>\n    </div>\n  );\n};\n","import React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport { Checkbox, Select } from '@grafana/ui';\nimport { XAxis } from '../types/XAxis';\n\ninterface Props extends StandardEditorProps<XAxis> { }\n\nexport const XAxisEditor: React.FC<Props> = ({ onChange, context }) => {\n  if (\n    context.data\n    && context.data.length > 0) {\n    const { xAxis } = context.options;\n    const options = context.data\n      .flatMap((frame) => frame.fields)\n      .map((field, index) => ({\n        label: field.config?.displayName ? field.config.displayName : field.name,\n        value: index,\n        valid: field.type !== 'string',\n      }));\n\n    return (\n      <div className=\"XAxisEditor\">\n        <div className=\"ScatterFlex\">\n          <div className=\"ScatterSelect\">\n            <Select<number>\n              isLoading={false}\n              value={xAxis.col}\n              onChange={(e) => {\n                xAxis.col = e.value as number;\n                onChange(xAxis);\n              }}\n              options={options}\n            />\n          </div>\n          <div className=\"ScatterFlex\">\n            <div className=\"ScatterCheckbox\" title=\"Draw X axis right to left\">Inverted</div>\n            <Checkbox\n              value={xAxis.inverted}\n              onChange={(e) => {\n                xAxis.inverted = e.currentTarget.checked;\n                onChange(xAxis);\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return <Select onChange={() => { }} disabled />;\n};\n","import React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport {\n  Button, ColorPicker, Input, Select,\n} from '@grafana/ui';\nimport { FieldSet } from '../types/FieldSet';\n\nconst randomColor = require('randomcolor');\n\ninterface Props extends StandardEditorProps<FieldSet[]> { }\n\nexport const FieldSetEditor: React.FC<Props> = ({ item, onChange, context }) => {\n  if (context.data && context.data.length > 0) {\n    const numberOptions = context.data\n      .flatMap((frame) => frame.fields)\n      .map((field, index) => ({\n        label: field.config?.displayName ? field.config.displayName : field.name,\n        value: index,\n        valid: field.type === 'number',\n      }))\n      .filter((o) => o.valid);\n\n    const stringOptions = context.data\n      .flatMap((frame) => frame.fields)\n      .map((field, index) => ({\n        label: field.config?.displayName ? field.config.displayName : field.name,\n        value: index,\n        valid: field.type === 'string',\n      }))\n      .filter((o) => o.valid);\n\n    const sizeOptions = Array(0);\n\n    for (let i = 1; i < 8; i += 1) {\n      sizeOptions.push({ label: i, value: -i });\n    }\n\n    numberOptions.forEach((o) => {\n      sizeOptions.push(o);\n    });\n\n    const colorOptions = Array(0);\n    colorOptions.push({ label: 'default', value: -1 });\n    stringOptions.forEach((o) => {\n      colorOptions.push(o);\n    });\n\n    const selects = new Array(0);\n\n    const values = context.options.fieldSets.filter((x: FieldSet) => x.col != null);\n\n    if (values) {\n      values.forEach((val: Number, index: number) => {\n        const lineSize = values[index].lineType === 'none' ? null : (\n          <div className=\"ScatterFlex ScatterSize\">\n            <div className=\"ScatterLabel\">Size</div>\n            <Input\n              type=\"number\"\n              label=\"Line Size\"\n              value={values[index].lineSize}\n              min={1}\n              max={10}\n              title=\"Set size of line\"\n              onChange={(e) => {\n                values[index].lineSize = (e.target as HTMLInputElement).valueAsNumber;\n                onChange(values);\n              }}\n            />\n          </div>\n        );\n\n        const polynomialOrder = values[index].lineType === 'polynomial'\n          ?\n          (\n            <div className=\"ScatterFlex ScatterSize\">\n              <div className=\"ScatterLabel\">Order</div>\n              <Input\n                type=\"number\"\n                label=\"Line Size\"\n                value={values[index].polynomialOrder}\n                min={1}\n                max={10}\n                title=\"Set order of polynomial fit\"\n                onChange={(e) => {\n                  values[index].polynomialOrder = (e.target as HTMLInputElement).valueAsNumber;\n                  onChange(values);\n                }}\n              />\n            </div>\n          )\n          : null;\n\n        const colorOverride =\n        (\n          <div className=\"ScatterFlex ScatterDotSize\">\n            <div className=\"ScatterLabel\">Dot Color</div>\n            <div className=\"ScatterSelect\">\n              <Select<number>\n                isLoading={false}\n                value={values[index].colorCol}\n                isClearable={false}\n                onChange={(e) => {\n                  values[index].colorCol = e.value;\n                  onChange(values);\n                }}\n                options={colorOptions}\n              />\n            </div>\n          </div>\n        );\n\n        selects.push(\n          <div className=\"FieldSetEditor\">\n            <div className=\"ScatterFlex\">\n              <div className=\"ScatterSelect\">\n                <Select<number>\n                  isLoading={false}\n                  value={values[index].col}\n                  isClearable={values.length > 1}\n                  onChange={(e) => {\n                    if (e) { values[index].col = e.value; } else { values.splice(index, 1); }\n                    onChange(values);\n                  }}\n                  options={numberOptions}\n                />\n              </div>\n              <div className=\"ScatterFlex ScatterDotSize\">\n                <div className=\"ScatterLabel\">Size</div>\n\n                <div className=\"ScatterSelect\">\n                  <Select<number>\n                    isLoading={false}\n                    value={values[index].sizeCol}\n                    isClearable\n                    onChange={(e) => {\n                      values[index].sizeCol = e ? e.value as number : -1;\n                      onChange(values);\n                    }}\n                    options={sizeOptions}\n                  />\n                </div>\n              </div>\n              <div className=\"ScatterDotColor\">\n                <ColorPicker\n                  color={values[index].color}\n                  enableNamedColors={false}\n                  onChange={(e) => {\n                    values[index].color = e;\n                    onChange(values);\n                  }}\n                />\n              </div>\n            </div>\n            {colorOverride}\n            <div className=\"ScatterFlex\">\n              <div className=\"ScatterFlex ScatterLineType\">\n                <div className=\"ScatterLabel\">Line</div>\n                <Select<string>\n                  isLoading={false}\n                  value={values[index].lineType}\n                  onChange={(e) => {\n                    values[index].lineType = e.value;\n                    onChange(values);\n                  }}\n                  options={[\n                    { label: 'None', value: 'none' },\n                    { label: 'Simple', value: 'simple' },\n                    { label: 'Linear', value: 'linear' },\n                    { label: 'Theil–Sen', value: 'theilsen' },\n                    { label: 'Exponential', value: 'exponential' },\n                    { label: 'Power', value: 'power' },\n                    { label: 'Polynomial', value: 'polynomial' }]}\n                />\n              </div>\n              {polynomialOrder}\n              {lineSize}\n            </div>\n            <hr />\n          </div>,\n        );\n      });\n    }\n\n    const addButton = values.some((x: FieldSet) => x.col === -1)\n      ? null\n      : (\n        <div>\n          <Button\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={() => {\n              values.push(new FieldSet(-1, -1, randomColor(), 2, 1, 'none', 3, false, -1));\n              onChange(values);\n            }}\n          >\n            <i className=\"fa fa-plus\" />\n            {'  '}\n            Add\n            {'  '}\n            {item.name.replace('(s)', '')}\n          </Button>\n          <hr />\n        </div>\n      );\n\n    return (\n      <div>\n        {selects}\n        {addButton}\n      </div>\n    );\n  }\n\n  return null;\n};\n","/* eslint no-useless-constructor:off, no-unused-vars:off, no-empty-function:off */\nexport class ReferenceLine {\n  constructor(\n    public label: string,\n    public value: number,\n    public lineColor: string,\n    public lineSize: number,\n    public vertical: boolean,\n  ) {\n  }\n}\n","import React from 'react';\nimport { StandardEditorProps } from '@grafana/data';\nimport {\n  Button, ColorPicker, Input, Checkbox,\n} from '@grafana/ui';\nimport { ReferenceLine } from '../types/ReferenceLine';\n\nconst randomColor = require('randomcolor');\n\ninterface Props extends StandardEditorProps<ReferenceLine[]> { }\n\nexport const ReferenceLinesEditor: React.FC<Props> = ({ item, onChange, context }) => {\n  if (context.data && context.data.length > 0) {\n    const ReferenceLines = context.options.ReferenceLines;\n\n    const ReferenceLinesContent = new Array(0);\n\n    context.options.ReferenceLines.forEach((line: ReferenceLine, index: number) => {\n      ReferenceLinesContent.push(\n        <div className=\"ReferenceLineEditor\">\n          <div className=\"ScatterFlex\">\n            <div className=\"ScatterLabel\">Value</div>\n            <Input\n              className=\"ReferenceLineValue\"\n              type=\"number\"\n              value={line.value}\n              onChange={(e) => {\n                line.value = (e.target as HTMLInputElement).valueAsNumber;\n                onChange(ReferenceLines);\n              }}\n            />\n            <div className=\"ScatterFlex ScatterSize\">\n              <div className=\"ScatterLabel\">Size</div>\n              <Input\n                type=\"number\"\n                min={0}\n                max={10}\n                title=\"Set size of text\"\n                value={line.lineSize}\n                onChange={(e) => {\n                  line.lineSize = (e.target as HTMLInputElement).valueAsNumber;\n                  onChange(ReferenceLines);\n                }}\n              />\n            </div>\n            <div className=\"ScatterDotColor\">\n              <ColorPicker\n                color={line.lineColor}\n                enableNamedColors={false}\n                onChange={(e) => {\n                  line.lineColor = e;\n                  onChange(ReferenceLines);\n                }}\n              />\n            </div>\n            <div className=\"ScatterLabel\">Label</div>\n            <Input\n              className=\"ReferenceLineLabel\"\n              type=\"string\"\n              value={line.label}\n              onChange={(e) => {\n                line.label = (e.target as HTMLInputElement).value.toString();\n                onChange(ReferenceLines);\n              }}\n            />\n            <div className=\"ScatterFlex\">\n              <div className=\"ScatterCheckbox\" title=\"Draw X axis right to left\">Vertical</div>\n              <Checkbox\n                value={line.vertical}\n                onChange={(e) => {\n                  line.vertical = e.currentTarget.checked;\n                  onChange(ReferenceLines);\n                }}\n              />\n            </div>\n\n            <Button\n              className=\"ReferenceLineDeleteButton\"\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={() => {\n                ReferenceLines.splice(index, 1);\n                onChange(ReferenceLines);\n              }}\n            >\n              {' '}\n              <i className=\"fa fa-trash\" />\n            </Button>\n          </div>\n          <hr />\n        </div>,\n      );\n    });\n\n    const addButton =\n      (\n        <div>\n          <Button\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={() => {\n              ReferenceLines.push(new ReferenceLine('', 0, randomColor(), 1, false));\n              onChange(ReferenceLines);\n            }}\n          >\n            <i className=\"fa fa-plus\" />\n            {'  '}\n            Add\n            {'  '}\n            {item.name.replace('(s)', '')}\n          </Button>\n          <hr />\n        </div>\n      );\n\n    return (\n      <div>\n        {ReferenceLinesContent}\n        {addButton}\n      </div>\n    );\n  }\n\n  return null;\n};\n","import { PanelPlugin } from '@grafana/data';\nimport { ExtentsEditor } from 'editors/ExtentsEditor';\nimport { MarginPairEditor } from 'editors/MarginPairEditor';\nimport { TitleEditor } from 'editors/TitleEditor';\nimport { LabelEditor } from 'editors/LabelEditor';\nimport { LegendEditor } from 'editors/LegendEditor';\nimport { BorderEditor } from 'editors/BorderEditor';\nimport { GridEditor } from 'editors/GridEditor';\nimport { Border } from 'types/Border';\nimport { XAxis } from 'types/XAxis';\nimport { MarginPair } from 'types/MarginPair';\nimport { Label } from 'types/Label';\nimport { Title } from 'types/Title';\nimport { Grid } from 'types/Grid';\nimport { Legend } from 'types/Legend';\nimport { Extents } from 'types/Extents';\nimport { ScatterOptions } from 'types/ScatterOptions';\nimport { ScatterPanel } from 'ScatterPanel';\nimport { XAxisEditor } from 'editors/XAxisEditor';\nimport { FieldSetEditor } from 'editors/FieldSetEditor';\nimport { ReferenceLinesEditor } from 'editors/ReferenceLinesEditor';\n\nexport const plugin = new PanelPlugin<ScatterOptions>(ScatterPanel)\n  .setPanelOptions((builder) => {\n    builder.addCustomEditor({\n      id: 'xAxis',\n      path: 'xAxis',\n      name: 'X Axis Field',\n      category: ['X Axis'],\n      editor: XAxisEditor,\n      defaultValue: new XAxis(-1, false),\n    });\n\n    builder.addCustomEditor({\n      id: 'xAxisExtents',\n      path: 'xAxisExtents',\n      name: 'X Axis Extent (Min & Max)',\n      category: ['X Axis'],\n      editor: ExtentsEditor,\n      defaultValue: new Extents(NaN, NaN),\n    });\n\n    builder.addCustomEditor({\n      id: 'xMargins',\n      path: 'xMargins',\n      name: 'Margins (Left & Right)',\n      category: ['X Axis'],\n      editor: MarginPairEditor,\n      defaultValue: new MarginPair(30, 10),\n    });\n\n    builder.addCustomEditor({\n      id: 'xAxisTitle',\n      path: 'xAxisTitle',\n      name: 'X Axis Title',\n      category: ['X Axis'],\n      editor: TitleEditor,\n      defaultValue: new Title('', '#777', 1, false, false, 4, 'white'),\n    });\n\n    builder.addCustomEditor({\n      id: 'label',\n      path: 'label',\n      name: 'X Axis Labels',\n      category: ['X Axis'],\n      editor: LabelEditor,\n      defaultValue: new Label(-1, '#CCC', 2),\n    });\n\n    builder.addCustomEditor({\n      id: 'fieldSets',\n      path: 'fieldSets',\n      name: 'Field(s)',\n      category: ['Y Axis'],\n      editor: FieldSetEditor,\n      defaultValue: [],\n    });\n\n    builder.addCustomEditor({\n      id: 'ReferenceLines',\n      path: 'ReferenceLines',\n      name: 'Reference Line(s)',\n      category: ['Y Axis'],\n      editor: ReferenceLinesEditor,\n      defaultValue: [],\n    });\n\n    builder.addCustomEditor({\n      id: 'yAxisExtents',\n      path: 'yAxisExtents',\n      name: 'Y Axis Extent (Min & Max)',\n      category: ['Y Axis'],\n      editor: ExtentsEditor,\n      defaultValue: new Extents(NaN, NaN),\n    });\n\n    builder.addCustomEditor({\n      id: 'yMargins',\n      path: 'yMargins',\n      name: 'Margins (Bottom & Top)',\n      category: ['Y Axis'],\n      editor: MarginPairEditor,\n      defaultValue: new MarginPair(20, 20),\n    });\n\n    builder.addCustomEditor({\n      id: 'yAxisTitle',\n      path: 'yAxisTitle',\n      name: 'Y Axis Title',\n      category: ['Y Axis'],\n      editor: TitleEditor,\n      defaultValue: new Title('', '#777', 1, false, false, 4, 'white'),\n    });\n\n    builder.addCustomEditor({\n      id: 'legend',\n      path: 'legend',\n      name: 'Legend',\n      category: ['Display'],\n      editor: LegendEditor,\n      defaultValue: new Legend(false, 3),\n    });\n\n    builder.addCustomEditor({\n      id: 'grid',\n      path: 'grid',\n      name: 'Grid',\n      category: ['Display'],\n      editor: GridEditor,\n      defaultValue: new Grid('gray'),\n    });\n\n    builder.addCustomEditor({\n      id: 'border',\n      path: 'border',\n      name: 'Border',\n      category: ['Display'],\n      editor: BorderEditor,\n      defaultValue: new Border('yellow', 0),\n    });\n\n    return builder;\n  });\n"],"sourceRoot":""}